{"version":3,"sources":["webpack:///./src/components/collection/collection_single.vue?7c6c","webpack:///./node_modules/@jx3box/jx3box-editor/service/enum/CollectionPublic.js","webpack:///src/components/collection/collection_single.vue","webpack:///./src/components/collection/collection_single.vue?60fa","webpack:///./src/components/collection/collection_single.vue","webpack:///./src/components/collection/collection_single.vue?84d5","webpack:///./node_modules/@jx3box/jx3box-common/js/interceptors.js","webpack:///./node_modules/@jx3box/jx3box-common/js/request.js","webpack:///./node_modules/@jx3box/jx3box-common/js/user.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","collection","attrs","url","title","public","_e","_v","_s","_f","user_id","user_nickname","dateFormat","created","updated","views","edit_link","on","$event","delete_handle","id","domProps","resolveImagePath","description","posts","length","_l","post","key","type","showAvatar","user_avatar","getLink","author_id","staticStyle","staticRenderFns","CollectionPublic","Object","freeze","PRIVATE","PUBLIC","name","props","components","data","publish","loading","computed","canEdit","watch","immediate","handler","methods","getThumbnail","getTypeLabel","collection_id","confirmButtonText","cancelButtonText","then","removeCollection","loadData","getCollection","post_extra","finally","execStat","postStat","getStat","filters","authorLink","mounted","component","throwError","err","console","log","response","Promise","reject","installNextInterceptors","target","options","use","code","installCmsInterceptors","$cms","domain","config","withCredentials","auth","username","localStorage","getItem","password","baseURL","headers","ins","a","create","$next","$pay","_options","assign","expires","created_at","logged_in","profile","anonymous","uid","group","status","bind_wx","avatar","avatar_origin","asset","isLogin","token","val","setItem","Infinity","Date","now","resolve","_save","clear","value","Error","check","removeItem","encodeURIComponent","location","href","account","login","getInfo","get","res","isPRE","was_vip","isExpired","expire_date","isPRO","was_pro","pro_expire_date","_isPRO","_isVIP","getAsset","total_day","pro_total_day","rename_card_count","had_renamed","namespace_card_count","box_coin","points","exp","level","range"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,uBAAuB,CAAGN,EAAIO,WAAuH,CAACH,EAAG,MAAM,CAACE,YAAY,+BAA+B,CAACF,EAAG,MAAM,CAACE,YAAY,8BAA8B,CAACF,EAAG,SAAS,CAACE,YAAY,mBAAmB,CAACF,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,OAAO,CAACE,YAAY,sBAAsBE,MAAM,CAAC,KAAOR,EAAIS,IAAI,MAAQT,EAAIO,WAAWG,QAAQ,CAAGV,EAAIO,WAAWI,OAA+EX,EAAIY,KAA3ER,EAAG,IAAI,CAACE,YAAY,yBAAyBE,MAAM,CAAC,MAAQ,WAAoBJ,EAAG,OAAO,CAACE,YAAY,gBAAgB,CAACN,EAAIa,GAAGb,EAAIc,GAAGd,EAAIO,WAAWG,cAAcN,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,MAAM,CAACE,YAAY,wBAAwB,CAACF,EAAG,IAAI,CAACE,YAAY,iBAAiB,CAACF,EAAG,MAAM,CAACI,MAAM,CAAC,MAAQ,6BAA6B,QAAU,YAAY,MAAQ,KAAK,OAAS,KAAK,cAAc,OAAO,KAAO,OAAO,aAAa,GAAG,KAAO,eAAe,UAAY,QAAQ,SAAW,OAAO,CAACJ,EAAG,OAAO,CAACI,MAAM,CAAC,YAAY,UAAU,EAAI,4NAA4NJ,EAAG,IAAI,CAACE,YAAY,SAASE,MAAM,CAAC,KAAOR,EAAIe,GAAG,aAAPf,CAAqBA,EAAIO,WAAWS,WAAW,CAAChB,EAAIa,GAAGb,EAAIc,GAAGd,EAAIO,WAAWU,oBAAoBb,EAAG,OAAO,CAACE,YAAY,uBAAuBE,MAAM,CAAC,MAAQ,SAAS,CAACJ,EAAG,IAAI,CAACE,YAAY,wBAAwBF,EAAG,OAAO,CAACJ,EAAIa,GAAGb,EAAIc,GAAGd,EAAIkB,WAAWlB,EAAIO,WAAWY,eAAef,EAAG,OAAO,CAACE,YAAY,uBAAuBE,MAAM,CAAC,MAAQ,SAAS,CAACJ,EAAG,IAAI,CAACE,YAAY,2BAA2BF,EAAG,OAAO,CAACJ,EAAIa,GAAGb,EAAIc,GAAGd,EAAIkB,WAAWlB,EAAIO,WAAWa,eAAehB,EAAG,OAAO,CAACE,YAAY,uBAAuB,CAACF,EAAG,IAAI,CAACE,YAAY,wBAAwBN,EAAIa,GAAG,IAAIb,EAAIc,GAAGd,EAAIqB,OAAO,OAAQrB,EAAW,QAAEI,EAAG,IAAI,CAACE,YAAY,qBAAqBE,MAAM,CAAC,KAAOR,EAAIsB,YAAY,CAAClB,EAAG,IAAI,CAACE,YAAY,qCAAqCF,EAAG,OAAO,CAACJ,EAAIa,GAAG,UAAUb,EAAIY,KAAMZ,EAAW,QAAEI,EAAG,IAAI,CAACE,YAAY,uBAAuBE,MAAM,CAAC,KAAO,sBAAsBe,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOxB,EAAIyB,cAAcD,EAAQxB,EAAIO,WAAWmB,OAAO,CAACtB,EAAG,IAAI,CAACE,YAAY,iCAAiCF,EAAG,OAAO,CAACJ,EAAIa,GAAG,UAAUb,EAAIY,WAAYZ,EAAIO,WAAsB,YAAE,CAACH,EAAG,aAAa,CAACI,MAAM,CAAC,mBAAmB,SAAS,CAACJ,EAAG,IAAI,CAACE,YAAY,uBAAuBN,EAAIa,GAAG,YAAYT,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,IAAI,CAACuB,SAAS,CAAC,UAAY3B,EAAIc,GAAGd,EAAI4B,iBAAiB5B,EAAIO,WAAWsB,oBAAoB7B,EAAIY,KAAMZ,EAAIO,WAAWuB,OAAS9B,EAAIO,WAAWuB,MAAMC,OAAQ,CAAC3B,EAAG,aAAa,CAACI,MAAM,CAAC,mBAAmB,SAAS,CAACJ,EAAG,IAAI,CAACE,YAAY,mBAAmBN,EAAIa,GAAG,YAAYT,EAAG,KAAK,CAACE,YAAY,UAAUN,EAAIgC,GAAIhC,EAAIO,WAAgB,OAAE,SAAS0B,EAAKC,GAAK,OAAO9B,EAAG,KAAK,CAAC8B,IAAIA,EAAI5B,YAAY,UAAU,CAACF,EAAG,OAAO,CAACE,YAAY,gBAAgB,CAACN,EAAIa,GAAGb,EAAIc,GAAGoB,EAAM,GAAG,OAAsB,WAAdD,EAAKE,KAAmB/B,EAAG,OAAO,CAACE,YAAY,eAAe,CAACF,EAAG,IAAI,CAACE,YAAY,iBAAiBN,EAAIa,GAAG,WAAWb,EAAIY,KAAoB,WAAdqB,EAAKE,MAAqBF,EAAKjB,QAASZ,EAAG,IAAI,CAACE,YAAY,gBAAgBE,MAAM,CAAC,OAAS,SAAS,KAAOR,EAAIe,GAAG,aAAPf,CAAqBiC,EAAKjB,WAAW,CAACZ,EAAG,MAAM,CAACE,YAAY,WAAWE,MAAM,CAAC,IAAMR,EAAIoC,WAAWH,EAAKI,gBAAgBjC,EAAG,OAAO,CAACE,YAAY,aAAaqB,SAAS,CAAC,YAAc3B,EAAIc,GAAGmB,EAAKhB,kBAAkBb,EAAG,OAAO,CAACE,YAAY,SAAS,CAACN,EAAIa,GAAG,SAASb,EAAIY,KAAKR,EAAG,IAAI,CAACE,YAAY,eAAeE,MAAM,CAAC,OAAS,SAAS,KAAqB,WAAdyB,EAAKE,KAAoBF,EAAKxB,IAAMT,EAAIsC,QAAQL,EAAKE,KAAMF,EAAKP,MAAM,CAAC1B,EAAIa,GAAGb,EAAIc,GAAGmB,EAAKvB,UAAWuB,EAAY,QAAE7B,EAAG,OAAO,CAACE,YAAY,YAAYqB,SAAS,CAAC,YAAc3B,EAAIc,GAAG,SAAWd,EAAIkB,WAAWe,EAAKb,aAAapB,EAAIY,UAAS,IAAIZ,EAAIY,MAAM,GAAGR,EAAG,MAAM,CAACE,YAAY,QAAQE,MAAM,CAAC,OAASR,EAAI0B,GAAG,SAAW,aAAa,UAAY1B,EAAIU,MAAM,OAASV,EAAIuC,UAAU,oBAAqB,EAAK,mBAAoB,EAAK,OAAS,SAAUvC,EAAM,GAAEI,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,aAAa,CAACI,MAAM,CAAC,mBAAmB,SAAS,CAACJ,EAAG,OAAO,CAACoC,YAAY,CAAC,MAAQ,YAAY,CAACpC,EAAG,IAAI,CAACE,YAAY,6BAA6BN,EAAIa,GAAG,YAAYT,EAAG,cAAc,CAACI,MAAM,CAAC,GAAKR,EAAI0B,GAAG,SAAW,iBAAiB,GAAG1B,EAAIY,MAA9oIR,EAAG,WAAW,CAACI,MAAM,CAAC,MAAQ,gBAAgB,KAAO,OAAO,OAAS,GAAG,YAAY,GAAG,UAAW,MAAmjI,IACjzIiC,EAAkB,G,wBCDtB,MAAMC,EAAmBC,OAAOC,OAAO,CACrCC,QAAS,EACTC,OAAQ,EAER,MACE,MAAO,CACL7C,KAAK4C,QACL5C,KAAK6C,WAKI,Q,4DC4GA,GACfC,wBACAC,SACAC,YACA,sBAEAC,gBACA,OACA3C,cACA4C,UACA1C,kBACAY,QACA+B,aAGAC,UACA/B,qBACA,+DAEAI,cAAA,MACA,2DAEAa,qBAAA,MACA,oEAEAe,mBACA,gEAEA5C,iBACA,+BAGA6C,OACA,oBACAC,aACAC,QAFA,SAEA/B,GACA,IACA,iBACA,qBAKAgC,SACAC,+BACArB,qBACAsB,+BACAxB,2BACAR,uCACAV,uBACA,wCAEAO,cATA,SASAD,EAAAqC,GAAA,WACArC,mBACA,mCACAsC,uBACAC,sBACA5B,iBACA6B,MAAA,WACAC,oCACA,8BACA,gBAAAlB,2BAIAmB,qBAAA,WACA,gBACAC,kBACAC,eAEAJ,MAAA,oBACA,0HACA,+CAEAK,SAAA,WACA,iBAGAC,qBAAA,WACAC,+BACAC,iDACA,6BAIAC,SACAC,4BAEAvD,qBACAwD,sBCjNwa,I,wBCQpaC,EAAY,eACd,EACA7E,EACA0C,GACA,EACA,KACA,WACA,MAIa,aAAAmC,E,6CCnBf,W,wHCAA,SAASC,EAAWC,GAEhB,OADAC,QAAQC,IAAIF,EAAIG,UACTC,QAAQC,OAAOL,GA0B1B,SAASM,EAAwBC,EAAQC,GACrCD,EAAO,gBAAgB,YAAYE,KAC/B,SAAUN,GACN,OAAIA,EAAS/B,KAAKsC,KACPN,QAAQC,OAAOF,GAEnBA,KAEX,SAAUH,GACN,OAAOD,EAAWC,MAW9B,SAASW,EAAuBJ,EAAQC,GACpCD,EAAO,gBAAgB,YAAYE,KAC/B,SAAUN,GACN,OAAIA,EAAS/B,KAAKsC,KACPN,QAAQC,OAAOF,GAEnBA,KAEX,SAAUH,GACN,OAAOD,EAAWC,MC/C9B,SAASY,EAAKJ,GACV,IAAIK,EAAUL,GAAWA,EAAQK,QAAW,WACxCC,EAAS,CAETC,iBAAiB,EACjBC,KAAM,CACFC,SAAWC,cAAgBA,aAAaC,QAAQ,UAAa,GAC7DC,SAAU,sBAEdC,QAAiDR,EACjDS,QAAS,IAIb,MAAMC,EAAM,EAAAC,EAAMC,OAAOX,GAKzB,OAFAH,EAAuBY,EAAKf,GAErBe,EA0CX,SAASG,EAAMlB,GACX,IAAIK,EAAUL,GAAWA,EAAQK,QAAW,YAExCC,EAAS,CAETC,iBAAiB,EACjBC,KAAM,CACFC,SAAWC,cAAgBA,aAAaC,QAAQ,UAAa,GAC7DC,SAAU,uBAEdC,QAAiDR,EACjDS,QAAS,IAIb,MAAMC,EAAM,EAAAC,EAAMC,OAAOX,GAKzB,OAFAR,EAAwBiB,EAAKf,GAEtBe,EAQX,SAASI,EAAKnB,GACV,IAAIoB,EAAWpB,GAAW3C,OAAOgE,OAAOrB,EAAS,CAAEK,OAAQ,cAAY,CAAEA,OAAQ,YACjF,OAAOa,EAAME,GChGjB,MAAM,EACF,cAEIzG,KAAK2G,QAAU,OACf3G,KAAK4G,WAAa,EAElB5G,KAAK6G,WAAY,EAGjB7G,KAAK8G,QAAU,GACf9G,KAAK+G,UAAY,CACbC,IAAK,EACLC,MAAO,EACPnE,KAAM,MACNoE,OAAQ,EACRC,QAAS,EACTC,OAAQ,wBAAW,KAAM,KACzBC,cAAe,qBAInBrH,KAAKsH,MAAQ,GAIjB,QAaI,OAZItH,KAAKuH,WACLvH,KAAK8G,QAAQE,IAAMjB,cAAgBA,aAAaC,QAAQ,OACxDhG,KAAK8G,QAAQG,MAASlB,cAAgBA,aAAaC,QAAQ,UAAa,EACxEhG,KAAK8G,QAAQU,MAAQzB,cAAgBA,aAAaC,QAAQ,SAC1DhG,KAAK8G,QAAQhE,KAAOiD,cAAgBA,aAAaC,QAAQ,QACzDhG,KAAK8G,QAAQI,OAASnB,cAAgBA,aAAaC,QAAQ,UAC3DhG,KAAK8G,QAAQK,QAAUpB,cAAgBA,aAAaC,QAAQ,WAC5DhG,KAAK8G,QAAQO,cAAiBtB,cAAgBA,aAAaC,QAAQ,WAAc,oBACjFhG,KAAK8G,QAAQM,OAAS,wBAAWpH,KAAK8G,QAAQO,cAAe,MAE7DrH,KAAK8G,QAAU9G,KAAK+G,UAEjB/G,KAIX,QAAQiC,EAAKwF,GACT,OAAO1B,aAAa2B,QAAQzF,EAAKwF,GAIrC,UAGI,OAFAzH,KAAK4G,WAAcb,aAAaC,QAAQ,cAA4BD,aAAaC,QAAQ,eAAhC2B,IACzD3H,KAAK6G,UAAiD,QAArCd,aAAaC,QAAQ,aAC/BhG,KAAK6G,WAAae,KAAKC,MAAQ7H,KAAK4G,WAAa5G,KAAK2G,QAIjE,MAAM1D,GACF8C,aAAa2B,QAAQ,aAAcE,KAAKC,OACxC9B,aAAa2B,QAAQ,aAAa,GAClC3B,aAAa2B,QAAQ,QAASzE,EAAKuE,OACnCzB,aAAa2B,QAAQ,MAAOzE,EAAK+D,KACjCjB,aAAa2B,QAAQ,QAASzE,EAAKgE,OACnClB,aAAa2B,QAAQ,OAAQzE,EAAKH,MAClCiD,aAAa2B,QAAQ,SAAUzE,EAAKiE,QACpCnB,aAAa2B,QAAQ,UAAWzE,EAAKkE,SACrCpB,aAAa2B,QAAQ,SAAUzE,EAAKmE,QAIxC,OAAOnE,GACH,OAAO,IAAIgC,QAAQ,CAAC6C,EAAS5C,KACzB,IACIlF,KAAK+H,MAAM9E,GACX6E,EAAQ9H,MACV,MAAO6E,GAEDkB,cACAA,aAAaiC,QACbhI,KAAK+H,MAAM9E,GACX6E,EAAQG,QAER/C,EAAO,IAAIgD,MAAM,uBAOjC,UAEI,OADAlI,KAAKmI,QACEnI,KAAK8G,QAIhB,UACI,OAAOrB,EAAK,CACRC,OAAQ,gBAEP1D,KAAK,mBACLoC,QAAQ,KACL2B,aAAaqC,WAAW,cACxBrC,aAAa2B,QAAQ,YAAa,SAClC3B,aAAaqC,WAAW,WAKpC,QAAQ5H,GACJA,EAAMA,EAAM6H,mBAAmB7H,GAAO6H,mBAAmBC,SAASC,MAClED,SAASC,KAAO,aAAQC,QAAQC,MAAQ,aAAejI,EAI3D,WACI,OAAOR,KAAK0I,UAAUlB,MAI1B,UACI,OAAOzB,aAAaC,QAAQ,aAIhC,gBACI,OAAOhG,KAAK0I,UAAUzB,OAAS,EAInC,gBACI,OAAOjH,KAAK0I,UAAUzB,OAAS,GAInC,WACI,OAAOjH,KAAK0I,UAAUzB,OAAS,GAInC,UACI,OAAOjH,KAAK0I,UAAUzB,OAAS,IAInC,cACI,OAAOjH,KAAK0I,UAAUzB,OAAS,IAInC,eACI,OAAOjH,KAAK0I,UAAUzB,OAAS,IAInC,gBACI,OAAIjH,KAAKuH,UACE9B,IACFkD,IAAI,iCAAmC3I,KAAK0I,UAAU1B,KACtDjD,KAAM6E,GACIA,EAAI3F,KAAKA,MAGjB,IAAIgC,QAAQ,CAAC6C,EAAS5C,KACzB4C,GAAQ,KAMpB,YACI,OAAO9H,KAAK0I,UAAUvB,QAI1B,OAAOG,GACH,IAAIuB,EAAQvB,EAAMwB,QAClB,GAAID,EAAO,CACP,IAAIE,EAAY,IAAInB,KAAKN,EAAM0B,aAAe,IAAIpB,KAAS,EAC3D,OAAOmB,EAEP,OAAO,EAIf,OAAOzB,GACH,IAAI2B,EAAQ3B,EAAM4B,QAClB,GAAID,EAAO,CACP,IAAIF,EAAY,IAAInB,KAAKN,EAAM6B,iBAAmB,IAAIvB,KAAS,EAC/D,OAAOmB,EAEP,OAAO,EAKf,QACI,OAAI/I,KAAKsH,MACE,IAAIrC,QAAQ,CAAC6C,EAAS5C,KACzB4C,EAAQ9H,KAAKoJ,OAAOpJ,KAAKsH,QAAUtH,KAAKqJ,OAAOrJ,KAAKsH,UAGjDtH,KAAKsJ,WAAWvF,KAAMuD,GAClBtH,KAAKoJ,OAAO9B,IAAUtH,KAAKqJ,OAAO/B,IAMrD,QACI,OAAItH,KAAKsH,MACE,IAAIrC,QAAQ,CAAC6C,EAAS5C,KACzB4C,EAAQ9H,KAAKoJ,OAAOpJ,KAAKsH,UAGtBtH,KAAKsJ,WAAWvF,KAAMuD,GAClBtH,KAAKoJ,OAAO9B,IAM/B,WACI,OAAKtH,KAAKuH,UAoBCf,IACFmC,IAAI,cACJ5E,KAAM6E,IACH,IAAItB,EAAQsB,EAAI3F,KAAKA,KAErB,OADAjD,KAAKsH,MAAQA,EACNA,IAxBR,IAAIrC,QAAQ,CAAC6C,EAAS5C,KACzB,IAAIoC,EAAQ,CACRwB,QAAS,EACTE,YAAa,2BACbO,UAAW,EACXL,QAAS,EACTC,gBAAiB,2BACjBK,cAAe,EACfC,kBAAmB,EACnBC,YAAa,EACbC,qBAAsB,EACtBC,SAAU,EACVC,OAAQ,GAEZ7J,KAAKsH,MAAQA,EAEbQ,EAAQR,KAcpB,SAASwC,GACL,IAAI,IAAIC,KAAS,iBAAY,CACzB,IAAIC,EAAQ,iBAAYD,GACxB,GAAGD,GAAOE,EAAM,IAAMF,EAAME,EAAM,GAC9B,QAASD,IAMV,WAAI","file":"js/chunk-de7dee16.6068ae87.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-collection-single\"},[(!_vm.collection)?_c('el-alert',{attrs:{\"title\":\"该剑三小册不存在或已被删除\",\"type\":\"info\",\"center\":\"\",\"show-icon\":\"\",\"closable\":false}}):[_c('div',{staticClass:\"m-collection-detail-content\"},[_c('div',{staticClass:\"m-collection-detail-header\"},[_c('header',{staticClass:\"m-single-header\"},[_c('div',{staticClass:\"m-single-title\"},[_c('span',{staticClass:\"u-title u-sub-block\",attrs:{\"href\":_vm.url,\"title\":_vm.collection.title}},[(!_vm.collection.public)?_c('i',{staticClass:\"u-private el-icon-lock\",attrs:{\"title\":\"仅自己可见\"}}):_vm._e(),_c('span',{staticClass:\"u-title-text\"},[_vm._v(_vm._s(_vm.collection.title))])])]),_c('div',{staticClass:\"m-single-info\"},[_c('div',{staticClass:\"u-author u-sub-block\"},[_c('i',{staticClass:\"u-author-icon\"},[_c('svg',{attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 12 16\",\"width\":\"12\",\"height\":\"16\",\"aria-hidden\":\"true\",\"fill\":\"#444\",\"svg-inline\":'',\"role\":'presentation',\"focusable\":'false',\"tabindex\":'-1'}},[_c('path',{attrs:{\"fill-rule\":\"evenodd\",\"d\":\"M12 14.002a.998.998 0 01-.998.998H1.001A1 1 0 010 13.999V13c0-2.633 4-4 4-4s.229-.409 0-1c-.841-.62-.944-1.59-1-4 .173-2.413 1.867-3 3-3s2.827.586 3 3c-.056 2.41-.159 3.38-1 4-.229.59 0 1 0 1s4 1.367 4 4v1.002z\"}})])]),_c('a',{staticClass:\"u-name\",attrs:{\"href\":_vm._f(\"authorLink\")(_vm.collection.user_id)}},[_vm._v(_vm._s(_vm.collection.user_nickname))])]),_c('span',{staticClass:\"u-podate u-sub-block\",attrs:{\"title\":\"发布日期\"}},[_c('i',{staticClass:\"u-icon el-icon-date\"}),_c('time',[_vm._v(_vm._s(_vm.dateFormat(_vm.collection.created)))])]),_c('span',{staticClass:\"u-modate u-sub-block\",attrs:{\"title\":\"最后更新\"}},[_c('i',{staticClass:\"u-icon el-icon-refresh\"}),_c('time',[_vm._v(_vm._s(_vm.dateFormat(_vm.collection.updated)))])]),_c('span',{staticClass:\"u-views u-sub-block\"},[_c('i',{staticClass:\"u-icon el-icon-view\"}),_vm._v(\" \"+_vm._s(_vm.views)+\" \")]),(_vm.canEdit)?_c('a',{staticClass:\"u-edit u-sub-block\",attrs:{\"href\":_vm.edit_link}},[_c('i',{staticClass:\"u-icon-edit el-icon-edit-outline\"}),_c('span',[_vm._v(\"编辑\")])]):_vm._e(),(_vm.canEdit)?_c('a',{staticClass:\"u-delete u-sub-block\",attrs:{\"href\":\"javascript:void(0)\"},on:{\"click\":function($event){return _vm.delete_handle($event, _vm.collection.id)}}},[_c('i',{staticClass:\"u-icon-remove el-icon-delete\"}),_c('span',[_vm._v(\"删除\")])]):_vm._e()])])]),(_vm.collection.description)?[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_c('i',{staticClass:\"el-icon-collection\"}),_vm._v(\" 小册简介 \")]),_c('div',{staticClass:\"u-description\"},[_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.resolveImagePath(_vm.collection.description))}})])]:_vm._e(),(_vm.collection.posts && _vm.collection.posts.length)?[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_c('i',{staticClass:\"el-icon-folder\"}),_vm._v(\" 小册文章 \")]),_c('ul',{staticClass:\"u-list\"},_vm._l((_vm.collection.posts),function(post,key){return _c('li',{key:key,staticClass:\"u-item\"},[_c('span',{staticClass:\"u-item-order\"},[_vm._v(_vm._s(key + 1)+\".\")]),(post.type === 'custom')?_c('span',{staticClass:\"u-item-link\"},[_c('i',{staticClass:\"el-icon-link\"}),_vm._v(\"站外链接 \")]):_vm._e(),(post.type !== 'custom' && post.user_id)?_c('a',{staticClass:\"u-item-author\",attrs:{\"target\":\"_blank\",\"href\":_vm._f(\"authorLink\")(post.user_id)}},[_c('img',{staticClass:\"u-avatar\",attrs:{\"src\":_vm.showAvatar(post.user_avatar)}}),_c('span',{staticClass:\"u-nickname\",domProps:{\"textContent\":_vm._s(post.user_nickname)}}),_c('span',{staticClass:\"u-div\"},[_vm._v(\"/\")])]):_vm._e(),_c('a',{staticClass:\"u-item-title\",attrs:{\"target\":\"_blank\",\"href\":post.type === 'custom' ? post.url : _vm.getLink(post.type, post.id)}},[_vm._v(_vm._s(post.title))]),(post.updated)?_c('time',{staticClass:\"u-updated\",domProps:{\"textContent\":_vm._s('最后更新于 ' + _vm.dateFormat(post.updated))}}):_vm._e()])}),0)]:_vm._e()],2),_c('Thx',{staticClass:\"m-thx\",attrs:{\"postId\":_vm.id,\"postType\":\"collection\",\"postTitle\":_vm.title,\"userId\":_vm.author_id,\"adminBoxcoinEnable\":true,\"userBoxcoinEnable\":true,\"client\":\"all\"}}),(_vm.id)?_c('div',{staticClass:\"m-comments\"},[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_c('span',{staticStyle:{\"color\":\"#999999\"}},[_c('i',{staticClass:\"el-icon-chat-line-square\"}),_vm._v(\" 讨论 \")])]),_c('jx3-comment',{attrs:{\"id\":_vm.id,\"category\":\"collection\"}})],1):_vm._e()]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const CollectionPublic = Object.freeze({\n  PRIVATE: 0,\n  PUBLIC: 1,\n\n  all() {\n    return [\n      this.PRIVATE,\n      this.PUBLIC,\n    ]\n  },\n})\n\nexport default CollectionPublic;","<template>\n    <div class=\"m-collection-single\">\n        <el-alert v-if=\"!collection\" title=\"该剑三小册不存在或已被删除\" type=\"info\" center show-icon :closable=\"false\"></el-alert>\n\n        <template v-else>\n            <div class=\"m-collection-detail-content\">\n                <div class=\"m-collection-detail-header\">\n                    <header class=\"m-single-header\">\n                        <!-- 标题 -->\n                        <div class=\"m-single-title\">\n                            <span class=\"u-title u-sub-block\" :href=\"url\" :title=\"collection.title\">\n                                <i class=\"u-private el-icon-lock\" v-if=\"!collection.public\" title=\"仅自己可见\"></i>\n                                <span class=\"u-title-text\">{{ collection.title }}</span>\n                            </span>\n                        </div>\n\n                        <!-- 信息 -->\n                        <div class=\"m-single-info\">\n                            <!-- 用户名 -->\n                            <div class=\"u-author u-sub-block\">\n                                <i class=\"u-author-icon\">\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 12 16\" width=\"12\" height=\"16\" aria-hidden=\"true\" fill=\"#444\" v-bind:svg-inline=\"''\" v-bind:role=\"'presentation'\" v-bind:focusable=\"'false'\" v-bind:tabindex=\"'-1'\"><path fill-rule=\"evenodd\" d=\"M12 14.002a.998.998 0 01-.998.998H1.001A1 1 0 010 13.999V13c0-2.633 4-4 4-4s.229-.409 0-1c-.841-.62-.944-1.59-1-4 .173-2.413 1.867-3 3-3s2.827.586 3 3c-.056 2.41-.159 3.38-1 4-.229.59 0 1 0 1s4 1.367 4 4v1.002z\"/></svg>\n                                </i>\n                                <a class=\"u-name\" :href=\"collection.user_id | authorLink\">{{ collection.user_nickname }}</a>\n                            </div>\n\n                            <!-- 发布日期 -->\n                            <span class=\"u-podate u-sub-block\" title=\"发布日期\">\n                                <i class=\"u-icon el-icon-date\"></i>\n                                <time>{{ dateFormat(collection.created) }}</time>\n                            </span>\n\n                            <!-- 最后更新 -->\n                            <span class=\"u-modate u-sub-block\" title=\"最后更新\">\n                                <i class=\"u-icon el-icon-refresh\"></i>\n                                <time>{{ dateFormat(collection.updated) }}</time>\n                            </span>\n\n                            <!-- 查看次数 -->\n                            <span class=\"u-views u-sub-block\">\n                                <i class=\"u-icon el-icon-view\"></i>\n                                {{ views }}\n                            </span>\n\n                            <!-- 编辑 -->\n                            <a class=\"u-edit u-sub-block\" :href=\"edit_link\" v-if=\"canEdit\">\n                                <i class=\"u-icon-edit el-icon-edit-outline\"></i>\n                                <span>编辑</span>\n                            </a>\n\n                            <!-- 删除 -->\n                            <a href=\"javascript:void(0)\" class=\"u-delete u-sub-block\" @click=\"delete_handle($event, collection.id)\" v-if=\"canEdit\">\n                                <i class=\"u-icon-remove el-icon-delete\"></i>\n                                <span>删除</span>\n                            </a>\n                        </div>\n                    </header>\n                </div>\n\n                <template v-if=\"collection.description\">\n                    <el-divider content-position=\"left\">\n                        <i class=\"el-icon-collection\"></i>\n                        小册简介\n                    </el-divider>\n                    <div class=\"u-description\">\n                        <p v-html=\"resolveImagePath(collection.description)\"></p>\n                    </div>\n                </template>\n\n                <template v-if=\"collection.posts && collection.posts.length\">\n                    <el-divider content-position=\"left\">\n                        <i class=\"el-icon-folder\"></i>\n                        小册文章\n                    </el-divider>\n                    <ul class=\"u-list\">\n                        <li class=\"u-item\" v-for=\"(post, key) in collection.posts\" :key=\"key\">\n                            <span class=\"u-item-order\">{{ key + 1 }}.</span>\n                            <span class=\"u-item-link\" v-if=\"post.type === 'custom'\"> <i class=\"el-icon-link\"></i>站外链接 </span>\n                            <a class=\"u-item-author\" v-if=\"post.type !== 'custom' && post.user_id\" target=\"_blank\" :href=\"post.user_id | authorLink\">\n                                <img class=\"u-avatar\" :src=\"showAvatar(post.user_avatar)\" />\n                                <span class=\"u-nickname\" v-text=\"post.user_nickname\"></span>\n                                <span class=\"u-div\">/</span>\n                            </a>\n                            <a class=\"u-item-title\" target=\"_blank\" :href=\"post.type === 'custom' ? post.url : getLink(post.type, post.id)\">{{ post.title }}</a>\n                            <time class=\"u-updated\" v-if=\"post.updated\" v-text=\"'最后更新于 ' + dateFormat(post.updated)\"></time>\n                        </li>\n                    </ul>\n                </template>\n            </div>\n\n            <!-- <div class=\"m-tags\" v-if=\"collection.tags && collection.tags.length\">\n                <div class=\"u-tags-title\">\n                    <i class=\"el-icon-price-tag\"></i>\n                    <span>标签</span>\n                </div>\n                <ul class=\"u-tags\">\n                    <li v-for=\"(tag, key) in collection.tags\" :key=\"key\" v-text=\"tag\" class=\"u-tag\"></li>\n                </ul>\n            </div>-->\n\n            <Thx class=\"m-thx\" :postId=\"id\" postType=\"collection\" :postTitle=\"title\" :userId=\"author_id\" :adminBoxcoinEnable=\"true\" :userBoxcoinEnable=\"true\" client=\"all\"/>\n\n            <div class=\"m-comments\" v-if=\"id\">\n                <el-divider content-position=\"left\">\n                    <span style=\"color:#999999\"> <i class=\"el-icon-chat-line-square\"></i> 讨论 </span>\n                </el-divider>\n                <jx3-comment :id=\"id\" category=\"collection\" />\n            </div>\n        </template>\n    </div>\n</template>\n\n<script>\nimport Comment from \"@jx3box/jx3box-comment-ui/src/Comment.vue\";\nimport CollectionPublish from \"@jx3box/jx3box-editor/service/enum/CollectionPublic\";\nimport { getCollection, removeCollection } from \"@/service/helper\";\nimport { dateFormat } from \"@/utils/dateFormat\";\nimport { getThumbnail, getLink, getTypeLabel, authorLink, editLink,showAvatar, resolveImagePath } from \"@jx3box/jx3box-common/js/utils\";\nimport User from \"@jx3box/jx3box-common/js/user.js\";\nimport { getStat, postStat } from \"@jx3box/jx3box-common/js/stat\";\nexport default {\n    name: \"CollectionSingle\",\n    props: [],\n    components: {\n        \"jx3-comment\": Comment,\n    },\n    data: function() {\n        return {\n            collection: \"\",\n            publish: CollectionPublish,\n            url: location.href,\n            views: 0,\n            loading: false,\n        };\n    },\n    computed: {\n        edit_link: function() {\n            return editLink(\"collection\", this.collection.id);\n        },\n        id: function() {\n            return this.collection?.id;\n        },\n        author_id: function() {\n            return this.collection?.user_id || 0;\n        },\n        canEdit: function() {\n            return this.author_id == User.getInfo().uid || User.isEditor();\n        },\n        title : function (){\n            return this.collection.title\n        }\n    },\n    watch: {\n        \"$route.params.id\": {\n            immediate: true,\n            handler(id) {\n                if (id) {\n                    this.loadData(id);\n                    this.execStat(id);\n                }\n            },\n        },\n    },\n    methods: {\n        getThumbnail,\n        getLink,\n        getTypeLabel,\n        showAvatar,\n        resolveImagePath,\n        dateFormat: function(timestamp) {\n            return dateFormat(new Date(timestamp * 1000));\n        },\n        delete_handle($event, collection_id) {\n            $event.preventDefault();\n            this.$confirm(\"确认是否删除该剑三小册？\", \"提示\", {\n                confirmButtonText: \"确定\",\n                cancelButtonText: \"取消\",\n                type: \"warning\",\n            }).then(() => {\n                removeCollection(collection_id).then((data) => {\n                    this.$message.success(data.message);\n                    this.$router.push({ name: \"collection\" });\n                });\n            });\n        },\n        loadData: function(id) {\n            this.loading = true;\n            getCollection(id, {\n                post_extra: 1,\n            })\n                .then((res) => {\n                    this.collection = res?.data?.data?.collection || {};\n                    this.$store.state.user_id = this.collection.user_id;\n                })\n                .finally(() => {\n                    this.loading = false;\n                });\n        },\n        execStat: function(id) {\n            postStat(\"collection\", id);\n            getStat(\"collection\", id).then((res) => {\n                this.views = res.data.views || 0;\n            });\n        },\n    },\n    filters: {\n        authorLink,\n    },\n    created: function() {},\n    mounted: function() {},\n};\n</script>\n\n<style scoped lang=\"less\">\n.m-single-header {\n    padding-top: 0;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./collection_single.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./collection_single.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./collection_single.vue?vue&type=template&id=ccc03c4c&scoped=true&\"\nimport script from \"./collection_single.vue?vue&type=script&lang=js&\"\nexport * from \"./collection_single.vue?vue&type=script&lang=js&\"\nimport style0 from \"./collection_single.vue?vue&type=style&index=0&id=ccc03c4c&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ccc03c4c\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./collection_single.vue?vue&type=style&index=0&id=ccc03c4c&scoped=true&lang=less&\"","function throwError(err) {\n    console.log(err.response);\n    return Promise.reject(err);\n}\n\n/**\n * 无包装器的拦截器\n *\n * @param {*} target\n * @param {*} options\n */\nfunction installInterceptors(target, options) {\n    target[\"interceptors\"][\"response\"].use(\n        function (response) {\n            return response;\n        },\n        function (err) {\n            return throwError(err);\n        }\n    );\n}\n\n/**\n * Next统一包装模式\n * go server\n * @param {*} target\n * @param {*} options\n */\nfunction installNextInterceptors(target, options) {\n    target[\"interceptors\"][\"response\"].use(\n        function (response) {\n            if (response.data.code) {\n                return Promise.reject(response);\n            }\n            return response;\n        },\n        function (err) {\n            return throwError(err);\n        }\n    );\n}\n\n/**\n * CMS统一包装模式\n * node.js server\n * @param {*} target\n * @param {*} options\n */\nfunction installCmsInterceptors(target, options) {\n    target[\"interceptors\"][\"response\"].use(\n        function (response) {\n            if (response.data.code) {\n                return Promise.reject(response);\n            }\n            return response;\n        },\n        function (err) {\n            return throwError(err);\n        }\n    );\n}\n\n/**\n * Helper统一包装模式\n * php server\n * @param {*} target\n * @param {*} options\n */\nfunction installHelperInterceptors(target, options) {\n    target[\"interceptors\"][\"response\"].use(\n        function (response) {\n            if (response.data.code == 200 || !response.data.code) {\n                return response;\n            }\n            return Promise.reject(response);\n        },\n        function (err) {\n            return throwError(err);\n        }\n    );\n}\n\nexport { installInterceptors, installNextInterceptors, installHelperInterceptors, installCmsInterceptors };\n","// 默认请求\nimport axios from \"axios\";\n\n// 拦截器\nimport { installInterceptors, installNextInterceptors, installHelperInterceptors, installCmsInterceptors } from \"./interceptors.js\";\n\n// 域名映射\nimport { __cms, __node, __spider, __next, __pay, __team, __lua, __helperUrl, __server, __sso } from \"../data/jx3box.json\";\n\n// cms通用请求接口\nfunction $cms(options) {\n    let domain = (options && options.domain) || __cms;\n    let config = {\n        // 同时发送cookie和basic auth\n        withCredentials: true,\n        auth: {\n            username: (localStorage && localStorage.getItem(\"token\")) || \"\",\n            password: \"cms common request\",\n        },\n        baseURL: process.env.NODE_ENV === \"production\" ? domain : \"/\",\n        headers: {},\n    };\n\n    // 创建实例\n    const ins = axios.create(config);\n\n    // 指定拦截器\n    installCmsInterceptors(ins, options);\n\n    return ins;\n}\n\n// helper通用请求接口\nimport { jx3ClientType } from \"./utils\";\nfunction $helper(options) {\n    let domain = (options && options.domain) || __helperUrl;\n\n    let config = {\n        // 同时发送cookie和basic auth\n        withCredentials: true,\n        auth: {\n            username: (localStorage && localStorage.getItem(\"token\")) || \"\",\n            password: \"helper common request\",\n        },\n        baseURL: domain,\n        headers: {\n            Accept: \"application/prs.helper.v2+json\",\n            \"JX3-Client-Type\": (options && options.client_id) || jx3ClientType(),\n        },\n    };\n\n    // 附加headers\n    if (options && options.headers) {\n        config.headers = Object.assign(config.headers, options.headers);\n    }\n\n    // 是否需要开启本地代理作为测试\n    if (options && options.proxy) {\n        config.baseURL = process.env.NODE_ENV === \"production\" ? domain : \"/\";\n    }\n\n    // 创建实例\n    const ins = axios.create(config);\n\n    // 指定拦截器\n    installHelperInterceptors(ins, options);\n\n    return ins;\n}\n\n// next 通用请求接口\nfunction $next(options) {\n    let domain = (options && options.domain) || __next;\n\n    let config = {\n        // 同时发送cookie和basic auth\n        withCredentials: true,\n        auth: {\n            username: (localStorage && localStorage.getItem(\"token\")) || \"\",\n            password: \"next common request\",\n        },\n        baseURL: process.env.NODE_ENV === \"production\" ? domain : \"/\",\n        headers: {},\n    };\n\n    // 创建实例\n    const ins = axios.create(config);\n\n    // 指定拦截器\n    installNextInterceptors(ins, options);\n\n    return ins;\n}\n\nfunction $team(options) {\n    let _options = options && Object.assign(options, { domain: __team }) || { domain: __team };\n    return $next(_options);\n}\n\nfunction $pay(options) {\n    let _options = options && Object.assign(options, { domain: __pay }) || { domain: __pay };\n    return $next(_options);\n}\n\nfunction $lua(options) {\n    let _options = options && Object.assign(options, { domain: __lua }) || { domain: __lua };\n    return $next(_options);\n}\n\n// node 通用请求接口\nfunction $node(options) {\n    let domain = (options && options.domain) || __node;\n    let config = {\n        // 同时发送cookie和basic auth\n        withCredentials: true,\n        auth: {\n            username: (localStorage && localStorage.getItem(\"token\")) || \"\",\n            password: \"node common request\",\n        },\n        baseURL: domain,\n    };\n\n    // 是否需要开启本地代理作为测试\n    if (options && options.proxy) {\n        config.baseURL = process.env.NODE_ENV === \"production\" ? domain : `http://localhost:${options.port}`;\n    }\n\n    // 创建实例\n    const ins = axios.create(config);\n\n    // 指定拦截器\n    installInterceptors(ins, options);\n\n    return ins;\n}\n\n// 默认请求\nfunction $http(options) {\n    let domain = typeof options == \"string\" ? options : options.domain;\n    let config = {\n        // 同时发送cookie和basic auth\n        withCredentials: true,\n        auth: {\n            username: (localStorage && localStorage.getItem(\"token\")) || \"\",\n            password: \"common request\",\n        },\n        baseURL: domain,\n        headers: Object.assign({}, options.headers || {}),\n    };\n\n    // 创建实例\n    const ins = axios.create(config);\n\n    // 指定拦截器\n    installNextInterceptors(ins, options);\n\n    return ins;\n}\n\nexport { $cms, $next, $helper, $node, $team, $pay, $lua, $http, axios };\n","import { showAvatar } from \"./utils\";\nimport { __Links, default_avatar, __server,__userLevel } from \"../data/jx3box.json\";\nimport { tokenExpires } from \"../data/conf.json\";\nimport { $pay, $cms } from \"./request\";\n\nclass User {\n    constructor() {\n        // TOKEN有效期\n        this.expires = tokenExpires;\n        this.created_at = 0;\n        // 登录状态\n        this.logged_in = false;\n\n        // 缓存资料\n        this.profile = {};\n        this.anonymous = {\n            uid: 0,\n            group: 0,\n            name: \"未登录\",\n            status: 0,\n            bind_wx: 0,\n            avatar: showAvatar(null, \"s\"),\n            avatar_origin: default_avatar,\n        };\n\n        // 资产缓存\n        this.asset = \"\";\n    }\n\n    // 检查当前状态\n    check() {\n        if (this.isLogin()) {\n            this.profile.uid = localStorage && localStorage.getItem(\"uid\");\n            this.profile.group = (localStorage && localStorage.getItem(\"group\")) || 1;\n            this.profile.token = localStorage && localStorage.getItem(\"token\");\n            this.profile.name = localStorage && localStorage.getItem(\"name\");\n            this.profile.status = localStorage && localStorage.getItem(\"status\");\n            this.profile.bind_wx = localStorage && localStorage.getItem(\"bind_wx\");\n            this.profile.avatar_origin = (localStorage && localStorage.getItem(\"avatar\")) || default_avatar;\n            this.profile.avatar = showAvatar(this.profile.avatar_origin, \"s\");\n        } else {\n            this.profile = this.anonymous;\n        }\n        return this;\n    }\n\n    // 更新指定缓存字段\n    refresh(key, val) {\n        return localStorage.setItem(key, val);\n    }\n\n    // 判断是否已登录\n    isLogin() {\n        this.created_at = !localStorage.getItem(\"created_at\") ? -Infinity : localStorage.getItem(\"created_at\");\n        this.logged_in = localStorage.getItem(\"logged_in\") == \"true\" ? true : false;\n        return this.logged_in && Date.now() - this.created_at < this.expires;\n    }\n\n    // 保存用户资料\n    _save(data) {\n        localStorage.setItem(\"created_at\", Date.now());\n        localStorage.setItem(\"logged_in\", true);\n        localStorage.setItem(\"token\", data.token);\n        localStorage.setItem(\"uid\", data.uid);\n        localStorage.setItem(\"group\", data.group);\n        localStorage.setItem(\"name\", data.name);\n        localStorage.setItem(\"status\", data.status);\n        localStorage.setItem(\"bind_wx\", data.bind_wx);\n        localStorage.setItem(\"avatar\", data.avatar);\n    }\n\n    // 更新用户资料\n    update(data) {\n        return new Promise((resolve, reject) => {\n            try {\n                this._save(data);\n                resolve(this);\n            } catch (err) {\n                //如果localStorage不存在或已满\n                if (localStorage) {\n                    localStorage.clear();\n                    this._save(data);\n                    resolve(value);\n                } else {\n                    reject(new Error(\"localStorage不可用\"));\n                }\n            }\n        });\n    }\n\n    // 获取用户基础缓存信息\n    getInfo() {\n        this.check();\n        return this.profile;\n    }\n\n    // 销毁登录状态\n    destroy() {\n        return $cms({\n            domain: __server,\n        })\n            .post(\"/account/logout\")\n            .finally(() => {\n                localStorage.removeItem(\"created_at\");\n                localStorage.setItem(\"logged_in\", \"false\");\n                localStorage.removeItem(\"token\");\n            });\n    }\n\n    // 跳转至登录\n    toLogin(url) {\n        url = url ? encodeURIComponent(url) : encodeURIComponent(location.href);\n        location.href = __Links.account.login + \"?redirect=\" + url;\n    }\n\n    // 获取本地令牌\n    getToken() {\n        return this.getInfo().token;\n    }\n\n    // 获取UUID\n    getUUID() {\n        return localStorage.getItem(\"device_id\");\n    }\n\n    // 判断是否邮箱验证\n    isEmailMember() {\n        return this.getInfo().group >= 8;\n    }\n\n    // 判断是否绑定手机\n    isPhoneMember() {\n        return this.getInfo().group >= 16;\n    }\n\n    // 判断是否为管理员|编辑\n    isEditor() {\n        return this.getInfo().group >= 64;\n    }\n\n    // 判断是否为管理员|运营\n    isAdmin() {\n        return this.getInfo().group >= 128;\n    }\n\n    // 判断是否为管理员|开发\n    isDeveloper() {\n        return this.getInfo().group >= 256;\n    }\n\n    // 判断是否为超管\n    isSuperAdmin() {\n        return this.getInfo().group >= 512;\n    }\n\n    // 判断是否为签约作者\n    isSuperAuthor() {\n        if (this.isLogin()) {\n            return $cms()\n                .get(\"/api/cms/user/is_super_author/\" + this.getInfo().uid)\n                .then((res) => {\n                    return res.data.data;\n                });\n        } else {\n            return new Promise((resolve, reject) => {\n                resolve(false);\n            });\n        }\n    }\n\n    // 是否绑定微信\n    hasBindwx() {\n        return this.getInfo().bind_wx;\n    }\n\n    // PRE身份判断\n    _isVIP(asset) {\n        let isPRE = asset.was_vip;\n        if (isPRE) {\n            let isExpired = new Date(asset.expire_date) - new Date() > 0;\n            return isExpired;\n        } else {\n            return false;\n        }\n    }\n    // PRO身份判断\n    _isPRO(asset) {\n        let isPRO = asset.was_pro;\n        if (isPRO) {\n            let isExpired = new Date(asset.pro_expire_date) - new Date() > 0;\n            return isExpired;\n        } else {\n            return false;\n        }\n    }\n\n    // 判断是否为VIP\n    isVIP() {\n        if (this.asset) {\n            return new Promise((resolve, reject) => {\n                resolve(this._isPRO(this.asset) || this._isVIP(this.asset));\n            });\n        } else {\n            return this.getAsset().then((asset) => {\n                return this._isPRO(asset) || this._isVIP(asset);\n            });\n        }\n    }\n\n    // 判断是否为PRO\n    isPRO() {\n        if (this.asset) {\n            return new Promise((resolve, reject) => {\n                resolve(this._isPRO(this.asset));\n            });\n        } else {\n            return this.getAsset().then((asset) => {\n                return this._isPRO(asset);\n            });\n        }\n    }\n\n    // 获取用户资产\n    getAsset() {\n        if (!this.isLogin()) {\n            return new Promise((resolve, reject) => {\n                let asset = {\n                    was_vip: 0,\n                    expire_date: \"1970-02-02T16:00:00.000Z\",\n                    total_day: 0,\n                    was_pro: 0,\n                    pro_expire_date: \"1970-02-02T16:00:00.000Z\",\n                    pro_total_day: 0,\n                    rename_card_count: 0,\n                    had_renamed: 0,\n                    namespace_card_count: 0,\n                    box_coin: 0,\n                    points: 0,\n                };\n                this.asset = asset;\n                // 空资产\n                resolve(asset);\n            });\n        } else {\n            return $pay()\n                .get(\"/api/vip/i\")\n                .then((res) => {\n                    let asset = res.data.data;\n                    this.asset = asset;\n                    return asset;\n                });\n        }\n    }\n\n    // 获取用户等级\n    getLevel(exp){\n        for(let level in __userLevel){\n            let range = __userLevel[level]\n            if(exp >= range[0] && exp < range[1]){\n                return ~~level\n            }\n        }\n    }\n}\n\nexport default new User();\n"],"sourceRoot":""}