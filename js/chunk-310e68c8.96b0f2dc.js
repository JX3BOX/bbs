(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-310e68c8"],{"04d1":function(t,e,a){"use strict";var i=a("342f"),n=i.match(/firefox\/(\d+)/i);t.exports=!!n&&+n[1]},"07ac":function(t,e,a){"use strict";var i=a("23e7"),n=a("6f53").values;i({target:"Object",stat:!0},{values:function(t){return n(t)}})},"1f19":function(t,e,a){t.exports=a.p+"img/labor.69cd08d3.gif"},"221f":function(t,e,a){},"3a67":function(t,e,a){"use strict";a("90d6")},4208:function(t,e,a){!function(e,a){t.exports=a()}(0,(function(){"use strict";return function(t,e,a){t=t||{};var i=e.prototype,n={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function s(t,e,a,n){return i.fromToBase(t,e,a,n)}a.en.relativeTime=n,i.fromToBase=function(e,i,s,r,o){for(var c,l,u,d=s.$locale().relativeTime||n,h=t.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],f=h.length,m=0;m<f;m+=1){var p=h[m];p.d&&(c=r?a(e).diff(s,p.d,!0):s.diff(e,p.d,!0));var g=(t.rounding||Math.round)(Math.abs(c));if(u=c>0,g<=p.r||!p.r){g<=1&&m>0&&(p=h[m-1]);var v=d[p.l];o&&(g=o(""+g)),l="string"==typeof v?v.replace("%d",g):v(g,i,p.l,u);break}}if(i)return l;var _=u?d.future:d.past;return"function"==typeof _?_(l):_.replace("%s",l)},i.to=function(t,e){return s(t,e,this,!0)},i.from=function(t,e){return s(t,e,this)};var r=function(t){return t.$u?a.utc():a()};i.toNow=function(t){return this.to(r(this),t)},i.fromNow=function(t){return this.from(r(this),t)}}}))},4879:function(t,e,a){},"4e82":function(t,e,a){"use strict";var i=a("23e7"),n=a("e330"),s=a("59ed"),r=a("7b0b"),o=a("07fa"),c=a("083a"),l=a("577e"),u=a("d039"),d=a("addb"),h=a("a640"),f=a("04d1"),m=a("d998"),p=a("2d00"),g=a("512ce"),v=[],_=n(v.sort),y=n(v.push),b=u((function(){v.sort(void 0)})),C=u((function(){v.sort(null)})),x=h("sort"),w=!u((function(){if(p)return p<70;if(!(f&&f>3)){if(m)return!0;if(g)return g<603;var t,e,a,i,n="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:a=3;break;case 68:case 71:a=4;break;default:a=2}for(i=0;i<47;i++)v.push({k:e+i,v:a})}for(v.sort((function(t,e){return e.v-t.v})),i=0;i<v.length;i++)e=v[i].k.charAt(0),n.charAt(n.length-1)!==e&&(n+=e);return"DGBEFHACIJK"!==n}})),k=b||!C||!x||!w,j=function(t){return function(e,a){return void 0===a?-1:void 0===e?1:void 0!==t?+t(e,a)||0:l(e)>l(a)?1:-1}};i({target:"Array",proto:!0,forced:k},{sort:function(t){void 0!==t&&s(t);var e=r(this);if(w)return void 0===t?_(e):_(e,t);var a,i,n=[],l=o(e);for(i=0;i<l;i++)i in e&&y(n,e[i]);d(n,j(t)),a=o(n),i=0;while(i<a)e[i]=n[i++];while(i<l)c(e,i++);return e}})},"4ec9":function(t,e,a){"use strict";a("6f48")},"512ce":function(t,e,a){"use strict";var i=a("342f"),n=i.match(/AppleWebKit\/(\d+)\./);t.exports=!!n&&+n[1]},"51f8":function(t,e,a){"use strict";a("8bb0")},"58c3":function(t,e,a){"use strict";a("7fbe")},"6f48":function(t,e,a){"use strict";var i=a("6d61"),n=a("6566");i("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),n)},"6f53":function(t,e,a){"use strict";var i=a("83ab"),n=a("d039"),s=a("e330"),r=a("e163"),o=a("df75"),c=a("fc6a"),l=a("d1e7").f,u=s(l),d=s([].push),h=i&&n((function(){var t=Object.create(null);return t[2]=2,!u(t,2)})),f=function(t){return function(e){var a,n=c(e),s=o(n),l=h&&null===r(n),f=s.length,m=0,p=[];while(f>m)a=s[m++],i&&!(l?a in n:u(n,a))||d(p,t?[a,n[a]]:n[a]);return p}};t.exports={entries:f(!0),values:f(!1)}},7427:function(t,e,a){t.exports=a.p+"img/ewm.3c5a7614.png"},"7fbe":function(t,e,a){},"83e4":function(t,e,a){t.exports=a.p+"img/topic.b1e13fd5.svg"},"86db":function(t,e,a){t.exports=a.p+"img/event.1cbfd0a6.svg"},8838:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("CommunityLayout",[e("CommunityHeader",{attrs:{categoryList:t.categoryList}}),e("CommunitySearch",{ref:"searchInput",on:{search:t.onSearch}}),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-community-content"},[t.isSearch?e("div",[e("CommunitySearchList",{attrs:{list:t.searchList},on:{search:t.onSearch,close:t.onCloseSearch}})],1):e("div",[t.topTopicData?e("TopicTop",{attrs:{data:t.topTopicData}}):t._e(),t.topTopicData?e("div",{staticClass:"m-topic-list m-topic-hot__mini"},[e("TopicItem",{attrs:{data:t.topTopicData}})],1):t._e(),t.list.length?e("div",{staticClass:"m-topic-list"},[e("waterfall",{ref:"waterfall",attrs:{col:t.col,autoResize:!0,moveTransitionDuration:0,fillBox:!0,list:t.list,gutter:10},scopedSlots:t._u([{key:"default",fn:function(t){return e("div",{class:{fadeIn:"show"==t.state}},[e("TopicItem",{key:t.data.id,attrs:{data:t.data}})],1)}}],null,!1,4056359723)})],1):t._e()],1),e("el-button",{staticClass:"m-topic-pages",style:{fontSize:t.hasNextPage?"14px":"12px"},attrs:{type:t.hasNextPage?"primary":"text",loading:t.loading,disabled:!t.hasNextPage,icon:t.hasNextPage?"el-icon-arrow-down":""},on:{click:t.appendPage}},[t._v(t._s(t.hasNextPage?"加载更多":"没有更多了"))]),e("el-pagination",{staticClass:"m-community-pages",attrs:{background:"",layout:"total, prev, pager, next, jumper","hide-on-single-page":!0,"page-size":t.per,total:t.total,"current-page":t.page},on:{"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e},"current-change":t.changePage}})],1)],1)},n=[],s=a("5530"),r=(a("99af"),a("7db0"),a("caad"),a("14d9"),a("b0c0"),a("b64b"),a("d3b7"),a("2532"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-community-layout",attrs:{id:"app"}},[e("Header"),e("Breadcrumb",{attrs:{name:"魔盒论坛",slug:"community",publishEnable:!1,topicEnable:!1,adminEnable:!1,feedbackEnable:!0,crumbEnable:!0}},[e("Info"),e("publish-gate",{attrs:{slot:"op-append"},slot:"op-append"})],1),e("LeftSidebar",[e("Nav")],1),e("Main",{attrs:{withoutRight:!1}},[e("div",{staticClass:"m-main"},[t._t("default")],2),e("RightSidebar",{staticClass:"m-bbs-right-side",attrs:{"show-toggle":!0}},[e("Side",{staticClass:"m-extend"})],1),e("Footer")],1)],1)}),o=[],c=a("8f33"),l=a("3fac"),u=a("ee7f"),d=a("98e8"),h=a("85e4"),f={name:"CommunityLayout",props:[],data:function(){return{}},computed:{slug:function(){return this.$route.name}},methods:{getAppIcon:h["getAppIcon"]},components:{Nav:l["a"],"publish-gate":d["a"],Info:c["a"],Side:u["a"]}},m=f,p=(a("cfb1"),a("2877")),g=Object(p["a"])(m,r,o,!1,null,null,null),v=g.exports,_=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-community-header"},[t._m(0),e("div",{staticClass:"m-community-header__tags",style:{gridTemplateColumns:"repeat(".concat(t.lineCount,", 1fr)")}},[t._l(t.showNavList,(function(i,n){return e("el-popover",{key:n,attrs:{"popper-class":"m-community-header__popover",placement:(n+1)/t.lineCount>1?"bottom":"top",trigger:"hover",content:i.remark}},[e("a",{class:"\n                ".concat(t.selectedCategory===i.value&&"u-active","\n                ").concat(i.mark&&"has-mark","\n                u-item"),style:{"--hover-bg-color":i.hoverColor,"--hover-color":i.color},attrs:{slot:"reference",href:i.href||"javascript:;"},on:{click:function(e){return t.handleChange(i)}},slot:"reference"},[e("span",[t._v(t._s(i.name))]),e("img",{directives:[{name:"svg-inline",rawName:"v-svg-inline"}],staticClass:"u-icon",attrs:{src:a("1c2f")("./".concat(i.icon,".svg"))}}),i.mark&&i.mark.indexOf(".svg")>=0?e("img",{directives:[{name:"svg-inline",rawName:"v-svg-inline"}],staticClass:"u-mark",style:{color:i.color},attrs:{src:a("97ee")("./".concat(i.mark))}}):i.mark?e("img",{staticClass:"u-mark",attrs:{src:a("97ee")("./".concat(i.mark))}}):t._e()])])})),e("el-dropdown",{attrs:{trigger:"click",size:"small",disabled:0===t.moreNavList.length}},[e("a",{class:"u-item u-more ".concat(0===t.moreNavList.length&&"is-disabled"),attrs:{href:"javascript:;"}},[e("span",[t._v("更多")]),e("i",{staticClass:"el-icon-arrow-down"})]),e("el-dropdown-menu",{staticClass:"m-community-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.moreNavList,(function(i,n){return e("el-dropdown-item",{key:n,staticClass:"m-community-dropdown__item",style:{"--hover-bg-color":i.hoverColor,"--hover-color":i.color,"--active-color":i.activeColor||"#fff"}},[e("a",{class:"".concat(t.selectedCategory===i.value&&"active"," u-item"),attrs:{href:i.href||"javascript:;"},on:{click:function(e){return t.handleChange(i)}}},[e("span",[t._v(" "+t._s(i.name))]),e("img",{directives:[{name:"svg-inline",rawName:"v-svg-inline"}],staticClass:"u-icon",attrs:{src:a("1c2f")("./".concat(i.icon,".svg"))}})])])})),1)],1)],2),t._m(1)])},y=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-community-publish"},[e("a",{staticClass:"u-publish",attrs:{href:"/publish/#/community",target:"_blank"}})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-community-header__special-box"},[e("div",{staticClass:"m-community-header__special-list"},[e("a",{attrs:{href:"/event",target:"_blank"}},[e("img",{attrs:{src:a("86db"),alt:"活动专题"}}),e("span",[t._v("活动专题")])]),e("a",{attrs:{href:"/topic",target:"_blank"}},[e("img",{attrs:{src:a("83e4"),alt:"资料片专题"}}),e("span",[t._v("资料片专题")])])]),e("img",{staticClass:"u-ewm",attrs:{src:a("7427"),alt:"",srcset:""}})])}],b=a("2909"),C=(a("fb6a"),{name:"CommunityHeader",props:["categoryList"],inject:["onCategoryChange"],data:function(){return{selectedCategory:"",showNavList:[],moreNavList:[],hoveredItem:null,lineCount:8}},mounted:function(){window.addEventListener("resize",this.handleResize),this.handleResize()},beforeDestroy:function(){window.removeEventListener("resize",this.handleResize)},watch:{lineCount:function(){this.initNavList()},categoryList:{deep:!0,immediate:!0,handler:function(){this.initNavList()}},"$route.query":{deep:!0,immediate:!0,handler:function(t){Object.keys(t).length&&t.category&&(this.selectedCategory=t.category)}}},methods:{handleResize:function(){window.innerWidth>=520?this.lineCount=8:this.lineCount=5},initNavList:function(){var t=2*this.lineCount-1,e=Object(b["a"])(this.categoryList);this.showNavList=e.slice(0,t),this.moreNavList=e.slice(t)},handleChange:function(t){if(!t.href){var e="";this.selectedCategory!=t.value&&(e=t.value),this.selectedCategory=e,this.onCategoryChange(e)}}}}),x=C,w=(a("3a67"),Object(p["a"])(x,_,y,!1,null,null,null)),k=w.exports,j=(a("ac1f"),a("841c"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-search-wrapper"},[e("div",{class:"m-community-search ".concat(t.isFocus&&"is-focus")},[e("div",{staticClass:"m-search-button",on:{click:t.onSearch}},[e("i",{staticClass:"el-icon-search"}),e("span",{staticClass:"u-button-text"},[t._v("搜一下")])]),e("div",{staticClass:"m-search-input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],ref:"input",staticClass:"u-input",attrs:{placeholder:"查找帖子",type:"text"},domProps:{value:t.search},on:{blur:t.onBlur,focus:function(e){t.isFocus=!0},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSearch.apply(null,arguments)},input:function(e){e.target.composing||(t.search=e.target.value)}}})])])])}),S=[],T={name:"CommunitySearch",data:function(){return{searchList:[],isFocus:!1,search:"",inSearch:!1}},methods:{onSearch:function(){this.isFocus||this.inSearch?(this.inSearch=!0,this.$emit("search",{q:this.search})):this.$refs.input.focus()},onBlur:function(){this.search||this.inSearch||(this.isFocus=!1)},closeSearch:function(){this.search="",this.isFocus=!1,this.inSearch=!1}}},A=T,O=(a("9c6e"),Object(p["a"])(A,j,S,!1,null,"4b2b8109",null)),L=O.exports,z=a("d049"),N=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-topic-box"},[e("div",{staticClass:"m-topic-top"},[e("div",{staticClass:"m-topic-top__time"},[e("i",{class:t.getTimeAgo(t.data.updated_at).icon}),e("span",[t._v(t._s(t.getTimeAgo(t.data.updated_at).text)+" ")])]),e("div",{class:"m-topic-category",style:"background-color: ".concat(t.styles.hoverColor,";color:").concat(t.styles.color,";"),on:{click:function(e){return t.onCategoryChange(t.data.category)}}},[e("img",{directives:[{name:"svg-inline",rawName:"v-svg-inline"}],staticClass:"u-icon",attrs:{src:a("1c2f")("./".concat(t.styles.icon,".svg"))}}),e("div",[t._v(t._s(t.data.category))])])]),e("div",{staticClass:"u-box m-topic-box__content"},[e("div",{staticClass:"u-content-aside"},[e("a",{staticClass:"u-cover",attrs:{href:t.getPostUrl(t.data.id),target:"_blank"}},[e("img",{attrs:{src:t.getBanner(t.data.banner_img),alt:"",srcset:""}})]),e("a",{staticClass:"u-title",attrs:{href:t.getPostUrl(t.data.id),target:"_blank"}},[t.isTop?e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none","svg-inline":"",srcset:"",role:"presentation",focusable:"false",tabindex:"-1"}},[e("rect",{attrs:{width:"24",height:"24",rx:"4",fill:"#FF6969"}}),e("path",{attrs:{"fill-rule":"evenodd",fill:"#FFF",d:"M21 6H3V4h18v2zm-1 7.778L12 8l-8 5.778h6V21h4v-7.222h6z"}})]):t._e(),t.data.is_star?e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none","svg-inline":"",srcset:"",role:"presentation",focusable:"false",tabindex:"-1"}},[e("rect",{attrs:{width:"24",height:"24",rx:"4",fill:"#FFBB69"}}),e("path",{attrs:{d:"M21 12l-6.582-2.418L12 3 9.582 9.582 3 12l6.582 2.418L12 21l2.418-6.582L21 12z",fill:"#FFF"}})]):t._e(),e("span",[t._v(t._s(t.data.title))])]),t.data.tags&&t.data.tags.length?e("div",{staticClass:"m-topic-tag"},t._l(t.data.tags,(function(a,i){return e("span",{key:i},[t._v(" "+t._s(a)+" ")])})),0):t._e(),t.data.collection_id&&t.data.collection.id&&t.data.collection.title?e("div",{staticClass:"m-topic-collection"},[e("a",{attrs:{href:"/collection/".concat(t.data.collection_id),target:"_blank"}},[e("span",{staticClass:"u-label"},[t._v("小册")]),e("span",{staticClass:"u-value"},[t._v(t._s(t.data.collection.title))])])]):t._e(),e("div",{staticClass:"m-topic-userInfo"},[e("a",{attrs:{href:t.authorLink(t.data.ext_user_info.id),target:"_blank"}},[e("img",{staticClass:"m-topic-userInfo__avatar",attrs:{src:t.showAvatar(),alt:"",srcset:""}}),e("span",{staticClass:"m-topic-userInfo__name"},[t._v(t._s(t.data.ext_user_info.display_name))])])])]),e("a",{staticClass:"u-box-content",attrs:{href:t.getPostUrl(t.data.id),target:"_blank"}},[e("a",{staticClass:"m-topic-content",attrs:{href:t.getPostUrl(t.data.id),target:"_blank"}},[e("div",{domProps:{innerHTML:t._s(t.introduction)}})]),e("div",{staticClass:"m-topic-imgs"},t._l(t.data.extra_images,(function(a,i){return e("a",{key:i,staticClass:"m-topic-imgs__item"},[e("img",{attrs:{src:t.getSquareBanner(a)}})])})),0)])])])},D=[],I=a("65c2"),B=a("2ef0"),W=a("fb92"),F={props:["data"],inject:["getCategoryStyle","onCategoryChange"],data:function(){return{}},computed:{styles:function(){return this.getCategoryStyle(this.data.category||"")},introduction:function(){var t=this.data;return t.introduction?t.introduction.length>=200?t.introduction+"...":t.introduction.length<=0?"......":t.introduction:""},isTop:function(){return this.data.is_top||this.data.is_category_top}},methods:{getTimeAgo:W["c"],authorLink:h["authorLink"],getBanner:function(t){if(t)return t.indexOf("jx3box.com")>=0?Object(h["getThumbnail"])(t,[336,176]):t;var e=Object(B["random"])(1,39);return I["__cdn"]+"design/random_cover/".concat(e,".jpg")},getSquareBanner:function(t){return t.indexOf("jx3box.com")>=0?Object(h["getThumbnail"])(t,96):t},showAvatar:function(){var t,e;return Object(h["showAvatar"])(null===(t=this.data)||void 0===t||null===(e=t.ext_user_info)||void 0===e?void 0:e.avatar)},getPostUrl:function(t){return"/community/".concat(t)}}},M=F,P=Object(p["a"])(M,N,D,!1,null,null,null),$=P.exports,R=a("81fc"),E=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"m-topic-hot m-topic-box"},[e("div",{staticClass:"m-topic-top"},[e("div",{staticClass:"m-topic-top__time"},[e("i",{class:t.getTimeAgo(t.data.updated_at).icon}),e("span",[t._v(t._s(t.getTimeAgo(t.data.updated_at).text)+" ")])]),e("div",{class:"m-topic-category",style:"background-color: ".concat(t.styles.hoverColor,";color:").concat(t.styles.color,";"),on:{click:function(e){return t.onCategoryChange(t.data.category)}}},[e("img",{directives:[{name:"svg-inline",rawName:"v-svg-inline"}],staticClass:"u-icon",attrs:{src:a("1c2f")("./".concat(t.styles.icon,".svg"))}}),e("div",[t._v(t._s(t.data.category))])])]),e("div",{staticClass:"m-topic-box__content"},[e("div",{staticClass:"m-topic-hot__left"},[e("a",{staticClass:"u-cover",attrs:{href:t.getPostUrl(t.data.id)}},[e("img",{attrs:{src:t.getBanner(t.data.banner_img),alt:"",srcset:""}})]),e("div",{staticClass:"m-topic-imgs"},t._l(t.data.extra_images,(function(a,i){return e("a",{key:i,staticClass:"m-topic-imgs__item",attrs:{href:t.getPostUrl(t.data.id)}},[e("img",{attrs:{src:t.getSquareBanner(a)}})])})),0)]),e("div",{staticClass:"m-topic-hot__right"},[e("a",{staticClass:"u-title",attrs:{href:t.getPostUrl(t.data.id),target:"_blank"}},[t.isTop?e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none","svg-inline":"",srcset:"",role:"presentation",focusable:"false",tabindex:"-1"}},[e("rect",{attrs:{width:"24",height:"24",rx:"4",fill:"#FF6969"}}),e("path",{attrs:{"fill-rule":"evenodd",fill:"#FFF",d:"M21 6H3V4h18v2zm-1 7.778L12 8l-8 5.778h6V21h4v-7.222h6z"}})]):t._e(),t.data.is_star?e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none","svg-inline":"",srcset:"",role:"presentation",focusable:"false",tabindex:"-1"}},[e("rect",{attrs:{width:"24",height:"24",rx:"4",fill:"#FFBB69"}}),e("path",{attrs:{d:"M21 12l-6.582-2.418L12 3 9.582 9.582 3 12l6.582 2.418L12 21l2.418-6.582L21 12z",fill:"#FFF"}})]):t._e(),e("span",[t._v(" "+t._s(t.data.title)+" ")])]),t.data.tags&&t.data.tags.length?e("div",{staticClass:"m-topic-tag"},t._l(t.data.tags,(function(a,i){return e("span",{key:i},[t._v(" "+t._s(a)+" ")])})),0):t._e(),t.data.collection_id&&t.data.collection.id&&t.data.collection.title?e("div",{staticClass:"m-topic-collection"},[e("a",{attrs:{href:"/collection/".concat(t.data.collection_id)}},[e("span",{staticClass:"u-label"},[t._v("小册")]),e("span",{staticClass:"u-value"},[t._v(t._s(t.data.collection.title))])])]):t._e(),e("div",{staticClass:"m-topic-userInfo"},[e("a",{attrs:{href:t.authorLink(t.data.ext_user_info.id),target:"_blank"}},[e("img",{staticClass:"m-topic-userInfo__avatar",attrs:{src:t.showAvatar(),alt:"",srcset:""}}),e("span",{staticClass:"m-topic-userInfo__name"},[t._v(t._s(t.data.ext_user_info.display_name))])])]),e("a",{staticClass:"m-topic-content",attrs:{href:t.getPostUrl(t.data.id),target:"_blank"}},[e("div",{domProps:{innerHTML:t._s(t.introduction)}})])])])])])},H=[],q={props:["data"],inject:["getCategoryStyle","onCategoryChange"],computed:{introduction:function(){var t=this.data;return t.introduction?t.introduction.length>=200?t.introduction+"...":t.introduction.length<=0?"......":t.introduction:""},styles:function(){return this.getCategoryStyle(this.data.category||"")},isTop:function(){return this.data.is_top||this.data.is_category_top}},methods:{getTimeAgo:W["c"],authorLink:h["authorLink"],showAvatar:function(){var t,e;return Object(h["showAvatar"])(null===(t=this.data)||void 0===t||null===(e=t.ext_user_info)||void 0===e?void 0:e.avatar)},getBanner:function(t){if(t)return t.indexOf("jx3box.com")>=0?Object(h["getThumbnail"])(t,[672,352]):t;var e=Object(B["random"])(1,39);return I["__cdn"]+"design/random_cover/".concat(e,".jpg")},getPostUrl:function(t){return"/community/".concat(t)},getSquareBanner:function(t){return t.indexOf("jx3box.com")>=0?Object(h["getThumbnail"])(t,96):t}}},U=q,Y=Object(p["a"])(U,E,H,!1,null,null,null),K=Y.exports,V=a("6f4a"),X=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-search_all"},[e("div",{staticClass:"m-search-toolbar"},[e("el-radio-group",{attrs:{size:"small"},model:{value:t.filter_name,callback:function(e){t.filter_name=e},expression:"filter_name"}},[e("el-radio-button",{attrs:{label:"community_discussion_topic,community_discussion_topic_reply"}},[t._v("全部")]),e("el-radio-button",{attrs:{label:"community_discussion_topic"}},[t._v("帖子")]),e("el-radio-button",{attrs:{label:"community_discussion_topic_reply"}},[t._v("回帖")])],1),e("el-button",{staticClass:"u-close-btn",attrs:{size:"small",type:"info",icon:"el-icon-close"},on:{click:t.closeSearch}},[t._v("关闭搜索")])],1),t.list.length?e("ul",{staticClass:"m-result m-post"},t._l(t.list,(function(a,i){return e("li",{key:i,staticClass:"u-item"},[e("div",{staticClass:"u-info"},[e("a",{staticClass:"u-title",attrs:{href:t.resultLink(a),target:"_blank"}},["community_discussion_topic"===a.name?e("el-tag",{staticClass:"u-type",attrs:{type:"warning",size:"small"}},[e("i",{staticClass:"el-icon-collection-tag"}),t._v(" 帖子 ")]):t._e(),"community_discussion_topic_reply"===a.name?e("el-tag",{staticClass:"u-type",attrs:{type:"info",size:"small"}},[e("i",{staticClass:"el-icon-chat-line-round"}),t._v(" 回帖 ")]):t._e(),e("span",{staticClass:"u-text"},[t._v(t._s(a.title||a.content||"无内容"))])],1),e("span",{staticClass:"u-link"},[e("span",{staticClass:"u-date"},[e("i",{staticClass:"el-icon-time"}),t._v(" "+t._s(a.updated_at))]),t._v(" "),e("i",{staticClass:"el-icon-user"}),t._v(" "+t._s(a.author)+" ")])])])})),0):e("div",[e("el-alert",{staticClass:"m-null",attrs:{title:"没有搜索到相关数据",type:"info","show-icon":""}})],1)])},J=[],Q=(a("9911"),{name:"CommunitySearchList",props:{list:{type:Array,default:function(){return[]}}},data:function(){return{filter_name:"community_discussion_topic,community_discussion_topic_reply"}},watch:{filter_name:function(){this.$emit("search",{filter_name:this.filter_name})}},methods:{closeSearch:function(){this.filter_name="community_discussion_topic,community_discussion_topic_reply",this.$emit("close")},resultLink:function(t){var e=t.link;return e},clientKey:function(t){return I["__clients"][t]}}}),G=Q,Z=(a("51f8"),Object(p["a"])(G,X,J,!1,null,"0bf34f38",null)),tt=Z.exports,et={components:{CommunityLayout:v,CommunityHeader:k,CommunitySearch:L,CommunitySearchList:tt,waterfall:z["a"],TopicItem:$,TopicTop:K},data:function(){return{searchParams:{q:"",filter_name:"community_discussion_topic,community_discussion_topic_reply"},loading:!1,col:1,page:1,total:0,per:10,pages:0,number_queries:["per","page"],category:void 0,list:[],searchList:[],isSearch:!1,topTopicData:null,categoryList:[]}},computed:{hasNextPage:function(){return this.pages>=1&&this.per*this.page<this.total}},provide:function(){return{onCategoryChange:this.onCategoryChange,getCategoryStyle:this.getCategoryStyle}},mounted:function(){this.handleResize(),window.addEventListener("resize",this.handleResize),this.loadData(),this.getCategoryList()},beforeDestroy:function(){window.removeEventListener("resize",this.handleResize)},watch:{"$route.query":{deep:!0,immediate:!0,handler:function(t){if(Object.keys(t).length)for(var e in t)this.number_queries.includes(e)?this[e]=~~t[e]:this[e]=t[e]}},list:{handler:function(t){t.length&&this.$refs.waterfall&&this.$refs.waterfall.repaints()},deep:!0}},methods:{onCloseSearch:function(){this.isSearch=!1,this.page=1,this.total=0,this.per=10,this.pages=0,this.searchParams={q:"",filter_name:"community_discussion_topic,community_discussion_topic_reply"},this.$refs.searchInput&&this.$refs.searchInput.closeSearch(),this.loadData()},handleResize:function(){window.innerWidth>1920?this.col=3:window.innerWidth>1200?this.col=2:this.col=1},onSearch:function(t){this.isSearch=!0,this.page=1,this.total=0,this.per=10,this.pages=0,this.searchParams=Object(s["a"])(Object(s["a"])({},this.searchParams),t),this.loadSearchData()},onCategoryChange:function(t){this.category=t,this.$refs.searchInput&&this.$refs.searchInput.closeSearch(),this.loadData()},changePage:function(){this.isSearch?this.loadSearchData():this.loadData()},replaceRoute:function(t){return this.$router.push({name:this.$route.name,query:Object.assign({},this.$route.query,t)})},appendPage:function(){this.isSearch?this.loadSearchData(!0):this.loadData(!0)},buildQuery:function(t){t&&(this.page+=1);var e={category:this.category,pageSize:this.per,index:this.page};return this.replaceRoute({category:this.category,page:this.page}),e},loadData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isSearch=!1;var a=this.buildQuery(e);this.loading=!0,Object(R["h"])(a).then((function(i){var n=i.data.data.list;e?t.list=t.list.concat(n||[]):(1===a.index&&n&&n.length?t.topTopicData=n.shift():t.topTopicData=null,t.list=n||[]),t.total=i.data.data.page.total,t.pages=i.data.data.page.pageTotal})).finally((function(){t.loading=!1}))},loadSearchData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(this.page+=1),this.loading=!0,Object(R["j"])(Object(s["a"])(Object(s["a"])({},this.searchParams),{},{pageIndex:this.page})).then((function(a){t.searchList=e?t.searchList.concat(a.data.data.hits||[]):a.data.data.hits||[];var i=a.data.data.page;t.total=i.total,t.pages=i.pageTotal,t.page=i.pageIndex})).finally((function(){t.loading=!1}))},getCategoryList:function(){var t=this;Object(R["f"])({type:"community"}).then((function(e){t.categoryList=Object(V["a"])(e.data.data)}))},getCategoryStyle:function(t){var e=this.categoryList.find((function(e){return e.value===t}));return e||{icon:"game",hoverColor:"rgba(235, 244, 255, 1)",color:"rgba(64, 128, 255, 1)"}}}},at=et,it=(a("58c3"),Object(p["a"])(at,i,n,!1,null,null,null));e["default"]=it.exports},"8bb0":function(t,e,a){},"90d6":function(t,e,a){},"97ee":function(t,e,a){var i={"./all.svg":"4645","./game.svg":"8ffe","./join.svg":"2f43","./labor.gif":"1f19","./labor.svg":"a6f6","./love.svg":"c736","./sns.svg":"af1b","./thunder.svg":"20d1","./write.svg":"d4d0"};function n(t){var e=s(t);return a(e)}function s(t){if(!a.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}n.keys=function(){return Object.keys(i)},n.resolve=s,t.exports=n,n.id="97ee"},"9c6e":function(t,e,a){"use strict";a("4879")},b85c:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));a("a4d3"),a("e01a"),a("d28b"),a("d9e2"),a("d3b7"),a("3ca3"),a("ddb0");var i=a("06c5");function n(t,e){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=Object(i["a"])(t))||e&&t&&"number"==typeof t.length){a&&(t=a);var n=0,s=function(){};return{s:s,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,c=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return o=t.done,t},e:function(t){c=!0,r=t},f:function(){try{o||null==a["return"]||a["return"]()}finally{if(c)throw r}}}}},baa2:function(t,e,a){"use strict";a("221f")},cfb1:function(t,e,a){"use strict";a("e148")},d049:function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{ref:"main",staticClass:"main",style:{height:t.maxH+"px"},attrs:{id:"main"}},[t._l(t.list,(function(a,i){return e("div",{key:i,ref:"item"+i,refInFor:!0,staticClass:"item",class:[t.moveMode,t.styleArr[i]&&t.styleArr[i].showClass],style:t.styleArr[i]},[t._t("default",null,{state:t.styleArr[i]&&t.styleArr[i].state||"loading",data:a,index:i})],2)})),t.autoResize?e("iframe",{ref:"autoExpand",staticClass:"autoExpand"}):t._e()],2)},n=[],s=a("b85c"),r=a("ade3"),o=a("c7eb"),c=a("1da1"),l=(a("99af"),a("14d9"),a("fb6a"),a("4e82"),a("4ec9"),a("a9e3"),a("b64b"),a("d3b7"),a("07ac"),a("3ca3"),a("159b"),a("ddb0"),{}),u=new Map,d=null,h={props:{list:{type:Array,default:function(){return[]}},imgKey:{type:String,default:"src"},col:{type:Number,default:0},colWidth:{type:Number,default:0},autoResize:{type:Boolean,default:!0},fillBox:{type:Boolean,default:!1},moveMode:{type:String,default:"transform"},moveTransitionDuration:{type:Number,default:.4}},data:function(){return{styleArr:[],colW:0,maxH:1,mainW:0,_col:0,__col:0,batchCB:null,onRender:null}},computed:{resizeDebounce:function(){return this.isTransition?this.debounce(this.resize,100):this.resize},isTransition:function(){return this.autoResize&&this.col<1}},mounted:function(){this.mainW=this.getWidth(),this.init(),this.polling()},watch:Object(r["a"])(Object(r["a"])({},"list.length",{deep:!1,handler:function(t,e){var a=this;return Object(c["a"])(Object(o["a"])().mark((function i(){return Object(o["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!(t>e)){i.next=4;break}return i.next=3,a.$nextTick();case 3:a.batchCB=a.initItem(e);case 4:case"end":return i.stop()}}),i)})))()}}),"autoResize",{handler:function(t){var e=this;t&&setTimeout((function(){e.$refs.autoExpand.contentWindow.onresize=function(t){e.resizeDebounce()}}))},immediate:!0}),methods:{repaints:function(){var t=arguments,e=this;return Object(c["a"])(Object(o["a"])().mark((function a(){var i,n;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=t.length>0&&void 0!==t[0]?t[0]:0,n=t.length>1?t[1]:void 0,a.next=4,e.$nextTick();case 4:e.mainW=e.getWidth(),e.calcCol(),e.calcXY(i,"repaints",n);case 7:case"end":return a.stop()}}),a)})))()},init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.calcCol(),this.batchCB=this.initItem(t)},getWidth:function(){return(this.$refs.main.getBoundingClientRect()||{}).width||0},resize:function(){var t=arguments,e=this;return Object(c["a"])(Object(o["a"])().mark((function a(){var i,n;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i=t.length>0&&void 0!==t[0]?t[0]:0,e.$refs.main){a.next=3;break}return a.abrupt("return");case 3:if(n=e.getWidth(),n!=e.mainW){a.next=6;break}return a.abrupt("return");case 6:e.mainW=n,e.calcCol(),e.autoResize&&(e.fillBox||e.col||e.__col!=e._col)&&e.calcXY(i,"resize");case 9:case"end":return a.stop()}}),a)})))()},calcCol:function(){var t=3;return this.col?(t=this.col,this.colW=this.mainW/t):this.colWidth?(t=parseInt(this.mainW/this.colWidth)||1,this.mainW%this.colWidth&&this.fillBox?this.colW=this.mainW/t:this.colW=this.colWidth):this.colW=this.mainW/t,this.__col=t,t},polling:function(){clearInterval(d),d=setInterval((function(){var t,e=Object(s["a"])(u);try{for(e.s();!(t=e.n()).done;){var a=t.value,i=a[0];if(a=a[1],!(a.img.height>0||a.img.complete))return;a.cb(a.img),u.delete(i)}}catch(n){e.e(n)}finally{e.f()}}),300)},initItem:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=this.list.slice(e),i=0;a.forEach((function(n,s){var r=s+e;t.styleArr[r]||(t.styleArr[r]={}),t.styleArr[r].width=t.colW+"px",t.loader(n[t.imgKey],(function(){i++,t.styleArr[r].complete=!0,t.styleArr[r].state="complete",t.$set(t.styleArr,r,t.styleArr[r]),i==a.length&&t.waitRender(e)}),t.getColDom(r).getElementsByClassName("waterfall-img")[0],s)}))},waitRender:function(t){for(var e=0;e<this.styleArr.length;e++)if(e<t&&(!this.styleArr[e]||!this.styleArr[e].complete))return;this.calcXY(t)},calcXY:function(){var t=arguments,e=this;return Object(c["a"])(Object(o["a"])().mark((function a(){var i,n,s,r,c,l,u,d,h,f,m,p;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:i=t.length>0&&void 0!==t[0]?t[0]:0,n=t.length>1&&void 0!==t[1]?t[1]:"data",s=t.length>2&&void 0!==t[2]?t[2]:isNaN(s)?e.moveTransitionDuration:s,r=i,e._col=e.__col,c=i;case 6:if(!(c<e.styleArr.length)){a.next=14;break}if(e.styleArr[c]&&e.styleArr[c].complete){a.next=9;break}return a.abrupt("continue",11);case 9:e.styleArr[c].width=e.colW+"px",e.styleArr[c].showClass&&(e.styleArr[c]["transition-duration"]="".concat(s,"s"));case 11:c++,a.next=6;break;case 14:return a.next=16,e.$nextTick();case 16:l=r;case 17:if(!(l<e.styleArr.length)){a.next=35;break}if(e.styleArr[l]&&e.styleArr[l].complete){a.next=20;break}return a.abrupt("return");case 20:if(u=e.getColDom(l),u){a.next=23;break}return a.abrupt("return");case 23:e.styleArr[l].height=u.offsetHeight,d=e.getMinCol(l),h=d.curTop,f=d.curCol,m=h+e.styleArr[l].height,p=d.maxH>m?d.maxH:m,"convention"==e.moveMode?(e.styleArr[l].left="".concat(f*e.colW,"px"),e.styleArr[l].top="".concat(h,"px")):e.styleArr[l].transform="translate3d(".concat(f*e.colW,"px, ").concat(h,"px ,0)"),e.maxH=p,e.styleArr[l].bottomTop=m,e.styleArr[l].col=f,e.styleArr[l].showClass="show",e.styleArr[l].state="show";case 32:l++,a.next=17;break;case 35:return e.$forceUpdate(),a.next=38,e.$nextTick();case 38:e.onRender&&e.onRender({cause:n,start:i});case 39:case"end":return a.stop()}}),a)})))()},getMinCol:function(t){if(!t)return{curCol:0,curTop:0,maxH:0};for(var e=0,a=0,i={},n=t-1;n>=0;n--){var s=this.styleArr[n];if(s&&!i[s.col]&&(i[s.col]=s),Object.keys(i).length==this.__col)break}var r=Object.values(i).sort((function(t,e){return t.bottomTop-e.bottomTop}));return t<this.__col?(e=t,a=0):(e=r[0].col,a=r[0].bottomTop),{curCol:e,curTop:a,maxH:r[r.length-1].bottomTop}},loader:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(a.height>0)return e(a);if(!t&&!a.src)return e();a.src&&(t=a.src);var n=l[t]&&l[t].img;if(n){if(n.complete||n.height>0)return e(n)}else{if(a.src?n=a:(n=new Image,n.src=t),n.complete||n.height>0)return e(n);l[t]={img:n,cbs:[],i:i},u.set(n.src,{img:n,cb:function(){l[t].cbs.forEach((function(t){return t()})),l[t].cbs.length=0}})}l[t].cbs.push(e)},getColDom:function(t){return this.$refs["item"+t][0]},debounce:function(t,e){var a;return function(){var i=this,n=arguments;a&&clearTimeout(a),a=setTimeout((function(){t.apply(i,n)}),e)}}}},f=h,m=(a("baa2"),a("2877")),p=Object(m["a"])(f,i,n,!1,null,"f2f37cbc",null);e["a"]=p.exports},d998:function(t,e,a){"use strict";var i=a("342f");t.exports=/MSIE|Trident/.test(i)},e148:function(t,e,a){},fb92:function(t,e,a){"use strict";a.d(e,"a",(function(){return o})),a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return l}));a("99af");var i=a("5a0c"),n=a.n(i),s=a("4208");function r(t){return n()().from(n()(t))}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=t.getFullYear(),n=t.getMonth()+1,s=t.getDate(),r=a?"".concat(i).concat(e).concat(c(n)).concat(e).concat(c(s)):"".concat(i).concat(e).concat(n).concat(e).concat(s);return r}function c(t){return t<10?"0"+t:t}function l(t){var e=n()(t),a=n()(),i=a.diff(e,"day");return 0===i?a.diff(e,"minute")<=60?{text:"刚刚",icon:"el-icon-loading"}:a.diff(e,"minute")<=120?{text:"2小时内",icon:"el-icon-time"}:{text:e.format("HH:mm"),icon:"el-icon-time"}:1===i?{text:"昨天",icon:"el-icon-time"}:i>=2&&i<=365?{text:e.format("MM-DD"),icon:"el-icon-date"}:{text:e.format("YYYY-MM-DD HH:mm:ss"),icon:"el-icon-date"}}a("a471"),n.a.locale("zh-cn"),n.a.extend(s)}}]);
//# sourceMappingURL=chunk-310e68c8.96b0f2dc.js.map