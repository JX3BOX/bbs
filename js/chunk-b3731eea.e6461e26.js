(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b3731eea"],{"02f7":function(t,n,i){},"0608":function(t){t.exports=JSON.parse('{"#下雨":"下雨.gif","#严寒":"严寒.gif","#亲亲":"亲亲.gif","#傲慢":"傲慢.gif","#冷汗":"冷汗.gif","#凶恶":"凶恶.gif","#刀":"刀.gif","#发怒":"发怒.gif","#口水":"口水.gif","#可怜":"可怜.gif","#吐":"吐.gif","#吓":"吓.gif","#呆":"呆.gif","#呲牙":"呲牙.gif","#咖啡":"咖啡.gif","#唇":"唇.gif","#喜欢":"喜欢.gif","#嘴":"嘴.gif","#噢":"噢.gif","#困":"困.gif","#大笑":"大笑.gif","#太阳":"太阳.gif","#媚眼":"媚眼.gif","#害羞":"害羞.gif","#寒":"寒.gif","#尴尬":"尴尬.gif","#差劲":"差劲.gif","#巴掌":"巴掌.gif","#强":"强.gif","#得意":"得意.gif","#微笑":"微笑.gif","#心碎":"心碎.gif","#恐慌":"恐慌.gif","#恶心":"恶心.gif","#感叹号":"感叹号.gif","#扁嘴":"扁嘴.gif","#打雷":"打雷.gif","#拍手":"拍手.gif","#握手":"握手.gif","#撇嘴":"撇嘴.gif","#无奈":"无奈.gif","#昏":"昏.gif","#晕":"晕.gif","#月亮":"月亮.gif","#标记":"标记.gif","#樱桃":"樱桃.gif","#欣喜":"欣喜.gif","#沉默":"沉默.gif","#流汗":"流汗.gif","#流泪":"流泪.gif","#灯泡":"灯泡.gif","#烟花":"烟花.gif","#爱心":"爱心.gif","#狂汗":"狂汗.gif","#狡猾":"狡猾.gif","#狡诈":"狡诈.gif","#猪":"猪.gif","#玫瑰":"玫瑰.gif","#生气":"生气.gif","#电话":"电话.gif","#睡":"睡.gif","#礼物":"礼物.gif","#笨猪":"笨猪.gif","#第一名":"第一名.gif","#第三名":"第三名.gif","#第二名":"第二名.gif","#红灯":"红灯.gif","#绿灯":"绿灯.gif","#胜利":"胜利.gif","#舌头":"舌头.gif","#色":"色.gif","#花":"花.gif","#苹果":"苹果.gif","#菠萝":"菠萝.gif","#蒜头":"蒜头.gif","#蜡烛":"蜡烛.gif","#衰":"衰.gif","#西瓜":"西瓜.gif","#讨厌":"讨厌.gif","#讶异":"讶异.gif","#鄙视":"鄙视.gif","#酷":"酷.gif","#钱":"钱.gif","#锤子":"锤子.gif","#问号":"问号.gif","#阴险":"阴险.gif","#难过":"难过.gif","#雪糕":"雪糕.gif","#饮料":"饮料.gif","#馒头":"馒头.gif","#香蕉":"香蕉.gif","#骷髅":"骷髅.gif","#鬼脸":"鬼脸.gif","#黄灯":"黄灯.gif"}')},"29c2":function(t,n,i){"use strict";i.d(n,"b",(function(){return a})),i.d(n,"a",(function(){return s}));var e=i("41cb");function a(t){var n={type:"bbs"};return t&&(n=Object.assign(n,t)),Object(e["a"])().get("/api/cms/posts",{params:n})}function s(t){return Object(e["a"])().get("/api/cms/post/".concat(t))}},"2a0e":function(t,n,i){"use strict";i("02f7")},4208:function(t,n,i){!function(n,i){t.exports=i()}(0,(function(){"use strict";return function(t,n,i){t=t||{};var e=n.prototype,a={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function s(t,n,i,a){return e.fromToBase(t,n,i,a)}i.en.relativeTime=a,e.fromToBase=function(n,e,s,r,o){for(var c,u,f,l=s.$locale().relativeTime||a,g=t.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],d=g.length,p=0;p<d;p+=1){var h=g[p];h.d&&(c=r?i(n).diff(s,h.d,!0):s.diff(n,h.d,!0));var m=(t.rounding||Math.round)(Math.abs(c));if(f=c>0,m<=h.r||!h.r){m<=1&&p>0&&(h=g[p-1]);var _=l[h.l];o&&(m=o(""+m)),u="string"==typeof _?_.replace("%d",m):_(m,e,h.l,f);break}}if(e)return u;var v=f?l.future:l.past;return"function"==typeof v?v(u):v.replace("%s",u)},e.to=function(t,n){return s(t,n,this,!0)},e.from=function(t,n){return s(t,n,this)};var r=function(t){return t.$u?i.utc():i()};e.toNow=function(t){return this.to(r(this),t)},e.fromNow=function(t){return this.from(r(this),t)}}}))},"506c":function(t,n,i){"use strict";var e=i("1157"),a=i.n(e),s=i("0608"),r=i("65c2");class o{constructor(t){this._joke=a.a.trim(t),this.init()}init(){this.code=this._renderHTML()}_renderHTML(){let t=this._joke;const n=Object.keys(s),i=t=>{const n=Object.keys(t),i={};return n.forEach(t=>{const n=t.slice(1),e=r["__imgPath"]+`image/emotion/${n}.gif`;i[t]=e}),i},e=t=>{let n=i(s);return`<img src="${n[t]}" alt="${t}" title="${t}" />`},a=(t,n)=>{const i=new RegExp(Object.keys(n).join("|"),"gi");return t.replace(i,t=>n[t])},o=[/(#[\u4e00-\u9fa5]{1})/g,/(#[\u4e00-\u9fa5]{2})/g,/(#[\u4e00-\u9fa5]{3})/g];let c={};return o.forEach(i=>{if(i.test(t)){let a=t.match(i).filter(t=>n.includes(t)).reduce((t,n)=>({...t,[n]:e(n)}),{});c=Object.assign({},c,a)}}),Object.keys(c).length>0&&(t=a(t,c)),t}}n["a"]=o},a471:function(t,n,i){!function(n,e){t.exports=e(i("5a0c"))}(0,(function(t){"use strict";function n(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var i=n(t),e={name:"zh-cn",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(t,n){return"W"===n?t+"周":t+"日"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},meridiem:function(t,n){var i=100*t+n;return i<600?"凌晨":i<900?"早上":i<1100?"上午":i<1300?"中午":i<1800?"下午":"晚上"}};return i.default.locale(e,null,!0),e}))},c8a91:function(t,n,i){"use strict";i.d(n,"b",(function(){return r})),i.d(n,"a",(function(){return o})),i.d(n,"f",(function(){return c})),i.d(n,"e",(function(){return f})),i.d(n,"c",(function(){return a})),i.d(n,"d",(function(){return s})),i.d(n,"g",(function(){return u}));var e=i("41cb");function a(){return Object(e["c"])({mute:!0}).get("/api/joke/recommended")}function s(t){return Object(e["c"])().post("/api/joke/share",t)}var r=function(t){return Object(e["a"])().get("/api/cms/post/jokes",{params:t})};function o(t){return Object(e["a"])().get("/api/cms/post/joke/".concat(t))}var c=function(t){return Object(e["a"])().put("/api/cms/post/joke/".concat(t,"/star"))};function u(t){return Object(e["a"])().put("/api/cms/post/joke/".concat(t,"/unstar"))}var f=function(t){return Object(e["a"])().delete("/api/cms/post/joke/".concat(t))}},d504:function(t,n,i){"use strict";i.r(n);var e=function(){var t=this,n=t._self._c;return n("div",{staticClass:"v-index"},[n("joke"),n("list")],1)},a=[],s=(i("ac1f"),i("841c"),function(){var t=this,n=t._self._c;return n("div",{staticClass:"v-index"},[n("el-input",{staticClass:"m-index-search",attrs:{placeholder:"请输入关键词"},model:{value:t.search,callback:function(n){t.search=n},expression:"search"}},[n("span",{attrs:{slot:"prepend"},slot:"prepend"},[n("i",{staticClass:"el-icon-search"}),t._v(" 搜索 ")]),n("span",{attrs:{slot:"append"},slot:"append"},[n("i",{staticClass:"el-icon-position"})])]),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-index-posts"},[t.posts&&t.posts.length?n("ul",{staticClass:"u-list"},t._l(t.posts,(function(i,e){return n("li",{key:e,staticClass:"u-item"},[n("a",{staticClass:"u-post",attrs:{href:t._f("postLink")(i.ID),target:t.target}},[n("span",{staticClass:"u-prefix",class:"isType-"+i.post_subtype},[n("i",{staticClass:"u-icon",class:t._f("showTypeIcon")(i.post_subtype)}),n("span",{staticClass:"u-type"},[t._v("["+t._s(t._f("showTypeLabel")(i.post_subtype))+"]")])]),n("span",{staticClass:"u-title",style:t._f("isHighlight")(i.color)},[t._v(t._s(i.post_title||"无标题"))]),i.mark&&i.mark.length?n("span",{staticClass:"u-marks"},t._l(i.mark,(function(i){return n("i",{key:i,staticClass:"u-mark",class:t._f("markcls")(i)},[t._v(t._s(t._f("showMark")(i)))])})),0):t._e()]),n("span",{staticClass:"u-misc"},[n("span",{staticClass:"u-author"},[n("a",{staticClass:"u-author-name",attrs:{href:t._f("authorLink")(i.post_author),target:"_blank"}},[t._v(t._s(i.author_info.display_name))]),n("img",{staticClass:"u-author-avatar",attrs:{src:t._f("showAvatar")(i.author_info.user_avatar),alt:i.author_info.display_name}})]),n("span",{staticClass:"u-date"},[n("time",[t._v(t._s(t._f("dateFormat")(i.post_modified)))])])])])})),0):n("el-alert",{attrs:{title:"没有找到相关条目",type:"info","show-icon":""}}),n("el-pagination",{staticClass:"m-pagination",attrs:{background:"","page-size":t.per,"hide-on-single-page":!0,"current-page":t.page,layout:"total, prev, pager, next, jumper",total:t.total},on:{"update:currentPage":function(n){t.page=n},"update:current-page":function(n){t.page=n},"current-change":t.skipTop}})],1)],1)}),r=[],o=(i("d3b7"),i("85e4")),c=i("1647"),u=i("fb92"),f=i("f3bc"),l=i("29c2"),g={name:"Index",props:[],data:function(){return{loading:!1,search:"",posts:[],per:20,page:1,total:1,icon_map:{1:"🔮",2:"❤️",3:"🎬",4:"📄"},types:f}},computed:{client:function(){return this.$store.state.client},params:function(){var t={per:this.per,page:~~this.page||1,sticky:1,client:this.client};return this.search&&(t.search=this.search),t},target:function(){return Object(o["buildTarget"])()}},methods:{showIcon:function(t){return this.icon_map[t]},skipTop:function(){window.scrollTo(0,0)},loadPosts:function(){var t=this;this.loading=!0,Object(l["b"])(this.params,this).then((function(n){t.posts=n.data.data.list,t.total=n.data.data.total})).finally((function(){t.loading=!1}))},getIconClass:function(t){return f[t]["icon"]+" "+"u-icon-".concat(t)}},filters:{dateFormat:function(t){return Object(u["a"])(new Date(t))},showAvatar:o["showAvatar"],authorLink:o["authorLink"],postLink:function(t){return location.origin+"/bbs/"+t},isHighlight:function(t){return t?"color:".concat(t,";font-weight:600;"):""},showMark:function(t){return c["a"][t]},markcls:function(t){return"u-mark-"+t},showTypeLabel:function(t){var n;return null===f||void 0===f||null===(n=f[t])||void 0===n?void 0:n["label"]},showTypeIcon:function(t){var n;return null===f||void 0===f||null===(n=f[t])||void 0===n?void 0:n["icon"]}},watch:{search:function(){this.page=1},params:{immediate:!0,deep:!0,handler:function(){this.loadPosts()}}}},d=g,p=i("2877"),h=Object(p["a"])(d,s,r,!1,null,null,null),m=h.exports,_=function(){var t=this,n=t._self._c;return n("div",{staticClass:"m-index-joke"},[n("h3",{staticClass:"u-label"},[n("img",{staticClass:"u-icon",attrs:{src:t.icon}}),t._v("今日骚话 ")]),n("div",{staticClass:"u-content"},[n("el-carousel",{attrs:{height:"20px",direction:"vertical",autoplay:!0}},t._l(t.data,(function(i,e){return n("el-carousel-item",{key:e},[n("a",{staticClass:"u-item",attrs:{href:"/bbs/#/joke/"+i.id,target:"_blank"}},[n("span",{staticClass:"u-author"},[t._v(t._s(i.author||"匿名"))]),n("span",{staticClass:"u-div"},[t._v(" : ")]),n("span",{staticClass:"u-joke",domProps:{innerHTML:t._s(i.html)}})])])})),1)],1)])},v=[],b=(i("159b"),i("2ef0"),i("65c2")),k=i("c8a91"),y=i("506c"),j={name:"joke",props:[],components:{},data:function(){return{data:[],icon:b["__imgPath"]+"image/box/joke.svg"}},computed:{},methods:{getLink:o["getLink"],init:function(){var t=this;Object(k["c"])().then((function(n){t.data=n.data.data.list,t.render()}))},render:function(){this.data.forEach((function(t){var n=new y["a"](t.content);t.html=n.code}))}},filters:{},created:function(){},mounted:function(){this.init()}},w=j,Y=Object(p["a"])(w,_,v,!1,null,null,null),C=Y.exports,M={name:"Index",props:[],components:{list:m,joke:C},data:function(){return{}},computed:{},watch:{},methods:{},filters:{},created:function(){},mounted:function(){}},L=M,O=(i("2a0e"),Object(p["a"])(L,e,a,!1,null,null,null));n["default"]=O.exports},f3bc:function(t){t.exports=JSON.parse('{"1":{"label":"攻略心得","icon":"el-icon-collection"},"2":{"label":"江湖回忆","icon":"el-icon-headset"},"3":{"label":"同人影音","icon":"el-icon-film"},"4":{"label":"交流讨论","icon":"el-icon-chat-line-square"}}')},fb92:function(t,n,i){"use strict";i.d(n,"a",(function(){return o})),i.d(n,"b",(function(){return r}));i("99af");var e=i("5a0c"),a=i.n(e),s=i("4208");function r(t){return a()().from(a()(t))}function o(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],e=t.getFullYear(),a=t.getMonth()+1,s=t.getDate(),r=i?"".concat(e).concat(n).concat(c(a)).concat(n).concat(c(s)):"".concat(e).concat(n).concat(a).concat(n).concat(s);return r}function c(t){return t<10?"0"+t:t}i("a471"),a.a.locale("zh-cn"),a.a.extend(s)}}]);
//# sourceMappingURL=chunk-b3731eea.e6461e26.js.map