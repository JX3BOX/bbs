(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ccdd7b9e"],{"11e5":function(t,e,a){},1344:function(t,e,a){"use strict";e["a"]=function(t){return{all:t=t||new Map,on:function(e,a){var i=t.get(e);i?i.push(a):t.set(e,[a])},off:function(e,a){var i=t.get(e);i&&(a?i.splice(i.indexOf(a)>>>0,1):t.set(e,[]))},emit:function(e,a){var i=t.get(e);i&&i.slice().map((function(t){t(a)})),(i=t.get("*"))&&i.slice().map((function(t){t(e,a)}))}}}},"1d49":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAJEWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMS0xMi0wM1QwMzozMzoyMyswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMS0xMi0wM1QwMzozOTozNiswODowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjEtMTItMDNUMDM6Mzk6MzYrMDg6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjc4YzYzYzhkLTI2ZmYtYjE0OC04ZGZhLWU1NjA0MWYzMzkxNSIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjc1MzkzN2E4LWQ5MWItMmU0MS04NWI1LTc5ODdiZDg2ZTU4YSIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjUyNmYzNjdlLTJiZjUtNTQ0NC04NGJlLTY4ZDhmOTM2ODAyYSIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NTI2ZjM2N2UtMmJmNS01NDQ0LTg0YmUtNjhkOGY5MzY4MDJhIiBzdEV2dDp3aGVuPSIyMDIxLTEyLTAzVDAzOjMzOjIzKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjVkZGFkNDUxLTU3MmMtZDQ0OC1hMTlhLTliYzMzNTRlM2JiOSIgc3RFdnQ6d2hlbj0iMjAyMS0xMi0wM1QwMzozOTozNiswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjb252ZXJ0ZWQiIHN0RXZ0OnBhcmFtZXRlcnM9ImZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImRlcml2ZWQiIHN0RXZ0OnBhcmFtZXRlcnM9ImNvbnZlcnRlZCBmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo3OGM2M2M4ZC0yNmZmLWIxNDgtOGRmYS1lNTYwNDFmMzM5MTUiIHN0RXZ0OndoZW49IjIwMjEtMTItMDNUMDM6Mzk6MzYrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE4IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NWRkYWQ0NTEtNTcyYy1kNDQ4LWExOWEtOWJjMzM1NGUzYmI5IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjUyNmYzNjdlLTJiZjUtNTQ0NC04NGJlLTY4ZDhmOTM2ODAyYSIgc3RSZWY6b3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjUyNmYzNjdlLTJiZjUtNTQ0NC04NGJlLTY4ZDhmOTM2ODAyYSIvPiA8cGhvdG9zaG9wOlRleHRMYXllcnM+IDxyZGY6QmFnPiA8cmRmOmxpIHBob3Rvc2hvcDpMYXllck5hbWU9IjUiIHBob3Rvc2hvcDpMYXllclRleHQ9IjUiLz4gPC9yZGY6QmFnPiA8L3Bob3Rvc2hvcDpUZXh0TGF5ZXJzPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pn1eaMcAAAIwSURBVHja7d3BSgJBGMBxlVA6B9UTRNChOiWR96KOEXRQatc6RA9QT9NDePAiPkQd6uRZKAgrlFhp+4Ym9hiN486n/A//m6vD/FgP7oxTSNO0QHpiEgAhQAAhQAAhQAAhQAD5+0Xx3aAo7UpdaSglOfUmtaRNO4aCY0vSvnQuNXMqko6klWmA7EmfUhqoZ2nHEWNZakiXgTI4q75BOgExTF9S2xHkICDGb4e+QT4Cg5gGjiBnCkAi3yBjBSAjR5BYAciFb5BEAcjQESRSANIEBBBAAAEEEEAAAQQQQAABBBBAAAEEEEAAAQQQQAABBBBAAAEEEEAAAQQQQABhoRwL5aYFEs0jyKMCkAdHkGMFICe+QZoKQBqOIGsKQNZ9gyxKt1I/AERPupbKjiAlaUM6DQBRl7akhdy2tE2wq2kuUrfHEBBAAAEEEEAAAQQQQAABBBBAAAEEEEA0gcgHV6SbgL/2Xk3wa2/ZXt8LMPa+nbeKb5BYwfOQuiNIXcHYY54YZt0rGPsTz9SzhgrGPmbVSdZoHkFmeV2WhjskAQQQQAABBBBAAAEEEEAAAQQQQAABBBBAAAEEEEAAAQQQQAABBBBAAAEEEEAAYaGc7oVys3zS56uGu5uzcLPa9vqQ4+/4BqnFYU+LfpGqjiBVe32osZt5q/kGMX9xZI7w7trv5LzOU3+Pf85T347dz1Mv2utb9v3yGvvIzpeZt1JuW9pI2R5DAgQQAgQQAoQAAYT+2TfXYST0P52KzwAAAABJRU5ErkJggg=="},"1db0":function(t,e,a){t.exports=a.p+"img/book.bcf0e30c.svg"},"29c2":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"a",(function(){return s})),a.d(e,"c",(function(){return r}));var i=a("41cb");function n(t){return Object(i["a"])().get("/api/cms/posts",{params:t})}function s(t){return Object(i["a"])().get("/api/cms/post/".concat(t))}function r(t){return Object(i["a"])().get("/api/cms/post/topics/count",{params:t})}},"33c0":function(t,e,a){t.exports=a.p+"img/fiction.3cb78401.svg"},"3fd7":function(t,e,a){"use strict";a("6a4b")},"498a":function(t,e,a){"use strict";var i=a("23e7"),n=a("58a8").trim,s=a("c8d2");i({target:"String",proto:!0,forced:s("trim")},{trim:function(){return n(this)}})},5916:function(t,e,a){"use strict";a.r(e);a("ac1f"),a("841c"),a("498a");var i=function(){var t=this,e=t._self._c;return e("ListLayout",[e("tabs"),t.subtype?t._e():e("list-notice"),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-archive-box"},[e("div",{staticClass:"m-archive-search m-bbs-search",attrs:{slot:"search-before"},slot:"search-before"},[e("a",{staticClass:"u-publish el-button el-button--primary",attrs:{href:t.publish_link}},[t._v("+ 发布作品")]),e("el-input",{attrs:{placeholder:"请输入搜索内容",clearable:""},on:{clear:t.onSearch},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSearch.apply(null,arguments)}},model:{value:t.search,callback:function(e){t.search="string"===typeof e?e.trim():e},expression:"search"}},[e("span",{attrs:{slot:"prepend"},slot:"prepend"},[e("i",{staticClass:"el-icon-search"}),t._v(" "),e("span",{staticClass:"u-search"},[t._v("关键词")])]),e("el-button",{attrs:{slot:"append",icon:"el-icon-position"},on:{click:t.onSearch},slot:"append"})],1)],1),e("div",{staticClass:"m-archive-filter"},[e("clientBy",{attrs:{type:t.client,showWujie:!0},on:{filter:t.filterImperceptibly}}),e("div",{staticClass:"u-condition u-map u-author"},[e("span",{staticClass:"u-prepend el-input-group__prepend"},[t._v("作者")]),e("el-select",{attrs:{"popper-class":"u-author-pop","remote-method":t.filterUser,remote:"",filterable:"",placeholder:"昵称",size:"small",clearable:""},model:{value:t.author,callback:function(e){t.author=e},expression:"author"}},t._l(t.users,(function(a){return e("el-option",{key:a.ID,attrs:{label:a.display_name,value:a.ID}},[e("div",{staticClass:"u-author-option"},[e("img",{staticClass:"u-avatar",attrs:{src:t.showAvatar(a.user_avatar),alt:""}}),e("span",{staticClass:"u-value"},[t._v(t._s(a.display_name))])])])})),1)],1),e("topicBy",{attrs:{modelValue:t.tag,topics:t.theme},on:{"update:modelValue":t.setTag}}),e("orderBy",{staticClass:"m-order-by",on:{filter:t.filterMeta}})],1),2==t.subtype?e("list-guide-top"):t._e(),e("list-top"),t.data&&t.data.length?e("div",{staticClass:"m-archive-list"},[e("ul",{staticClass:"u-list"},t._l(t.data,(function(a,i){return e("list-item",{key:i+a,attrs:{item:a,order:t.order,caller:"bbs_index_click"}})})),1)]):e("el-alert",{staticClass:"m-archive-null",attrs:{title:"没有找到相关条目",type:"info",center:"","show-icon":""}}),e("el-button",{directives:[{name:"show",rawName:"v-show",value:t.hasNextPage,expression:"hasNextPage"}],staticClass:"m-archive-more",attrs:{type:"primary",loading:t.loading,icon:"el-icon-arrow-down"},on:{click:t.appendPage}},[t._v("加载更多")]),e("el-pagination",{staticClass:"m-archive-pages",attrs:{background:"",layout:"total, prev, pager, next, jumper","hide-on-single-page":!0,"page-size":t.per,total:t.total,"current-page":t.page},on:{"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e},"current-change":t.changePage}})],1),e("design-task",{attrs:{post:t.currentPost},model:{value:t.showDesignTask,callback:function(e){t.showDesignTask=e},expression:"showDesignTask"}})],1)},n=[],s=a("2909"),r=a("ade3"),c=a("c7eb"),o=a("1da1"),l=(a("99af"),a("7db0"),a("caad"),a("a15b"),a("d81d"),a("14d9"),a("b0c0"),a("b64b"),a("d3b7"),a("2c3e"),a("2532"),a("1fb9")),u=function(){var t=this,e=t._self._c;return e("li",{staticClass:"u-item"},[e("a",{directives:[{name:"reporter",rawName:"v-reporter",value:{data:{href:t.reporterLink(t.item.ID)},caller:t.caller},expression:"{\n            data: {\n                href: reporterLink(item.ID),\n            },\n            caller,\n        }"}],staticClass:"u-banner",attrs:{href:t._f("postLink")(t.item.ID),target:t.target}},[e("img",{key:t.item.ID,attrs:{src:t.getBanner(t.item.post_banner,t.item.post_subtype)}})]),e("h2",{staticClass:"u-post",class:{isSticky:t.item.sticky}},[e("svg",{class:"u-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 16",width:"12",height:"16","aria-hidden":"true",fill:"#555","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[e("path",{attrs:{"fill-rule":"evenodd",d:"M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"}})]),t.item.post_subtype&&t.showSubtype(t.item.post_subtype)?e("span",{staticClass:"u-label u-zlp"},[t._v(t._s(t.showSubtype(t.item.post_subtype)))]):t._e(),e("a",{directives:[{name:"reporter",rawName:"v-reporter",value:{data:{href:t.reporterLink(t.item.ID)},caller:t.caller},expression:"{\n            data: {\n                href: reporterLink(item.ID),\n            },\n            caller,\n        }"}],staticClass:"u-title",style:t._f("showHighlight")(t.item.color),attrs:{href:t._f("postLink")(t.item.ID),target:t.target}},[t._v(t._s(t.item.post_title||"无标题"))]),t.item.mark&&t.item.mark.length?e("span",{staticClass:"u-marks"},t._l(t.item.mark,(function(a){return e("i",{key:a,staticClass:"u-mark"},[t._v(t._s(t._f("showMark")(a)))])})),0):t._e(),t.hasPermission?e("span",{staticClass:"u-push"},[t.showPushDate?e("time",{staticClass:"u-push__time",class:{"is-recent":t.isRecent()}},[t._v(t._s(t.pushDate)+" 已推送")]):t._e(),e("el-button",{staticClass:"u-push__btn",attrs:{size:"mini",type:"warning",icon:"el-icon-s-promotion"},on:{click:t.onPush}},[t._v("推送")])],1):t._e()]),e("div",{staticClass:"u-content u-desc"},[e("div",{staticClass:"u-metalist u-collection"},[e("strong",[t._v("小册")]),e("em",[~~t.item.post_collection?[e("a",{attrs:{href:"/collection/".concat(t.item.post_collection),target:"_blank"}},[t._v("《"+t._s(t.item.collection_info&&t.item.collection_info.title)+"》")])]:[t._v("-")]],2)]),e("div",{staticClass:"u-metalist u-topics"},[e("strong",[t._v("主题")]),e("em",[t.item.topics&&t.item.topics.length?t._l(t.item.topics,(function(a){return e("a",{key:a,staticClass:"u-topic",attrs:{href:"/bbs?tag=".concat(a)}},[t._v(t._s(a))])})):[t._v("-")]],2)])]),e("div",{staticClass:"u-misc"},[e("img",{staticClass:"u-author-avatar",attrs:{src:t._f("showAvatar")(t.item.author_info),alt:t._f("showNickname")(t.item.author_info)}}),e("a",{staticClass:"u-author-name",attrs:{href:t._f("authorLink")(t.item.post_author),target:"_blank"}},[t._v(t._s(t._f("showNickname")(t.item.author_info)))]),e("span",{staticClass:"u-date"},[t._v(" Updated on "),"update"==t.order?e("time",[t._v(t._s(t._f("dateFormat")(t.item.post_modified)))]):e("time",[t._v(t._s(t._f("dateFormat")(t.item.post_date)))])])])])},d=[],h=a("85e4"),p=a("65c2"),m=a("1647"),b=a("e4f1"),v=a("7903"),g=a("2ef0"),f=a("c9d2"),A=a("5a0c"),_=a.n(A),k=a("d8ad"),w={name:"ListItem",props:["item","order","caller"],components:{},data:function(){return{target:Object(h["buildTarget"])(),start:1,end:39}},computed:{client:function(){var t;return null===(t=this.item)||void 0===t?void 0:t.client},hasPermission:function(){return f["a"].hasPermission("push_banner")},pushDate:function(t){var e,a=t.item,i=null===a||void 0===a||null===(e=a.log)||void 0===e?void 0:e.push_at;return Object(b["a"])(new Date(i))},showPushDate:function(){var t;return Boolean(null===(t=this.item)||void 0===t?void 0:t.log)}},watch:{},methods:{getBanner:function(t,e){if(t)return Object(h["showBanner"])(t);var a=Object(g["random"])(this.start,this.end);return p["__cdn"]+"design/random_cover/".concat(a,".jpg")},reporterLink:function(t){var e="std"===this.client?"www":"origin";return"".concat(e,":/").concat(l["a"],"/")+t},showSubtype:function(t){var e;return(null===(e=v[t])||void 0===e?void 0:e.label)||""},showDate:b["a"],isRecent:function(){var t,e,a=null===(t=this.item)||void 0===t||null===(e=t.log)||void 0===e?void 0:e.push_at;return _()().diff(_()(a),"day")<30},onPush:function(){k["a"].emit("design-task",this.item)}},filters:{authorLink:h["authorLink"],postLink:function(t){return location.origin+"/".concat(l["a"],"/")+t},showHighlight:function(t){return t?"color:".concat(t,";font-weight:600;"):""},showMark:function(t){return m["a"][t]||t},showAvatar:function(t){return Object(h["showAvatar"])(null===t||void 0===t?void 0:t.user_avatar)},showNickname:function(t){return(null===t||void 0===t?void 0:t.display_name)||"匿名"},dateFormat:function(t){return Object(b["a"])(new Date(t))}},created:function(){},mounted:function(){}},y=w,I=a("2877"),j=Object(I["a"])(y,u,d,!1,null,null,null),O=j.exports,C=a("29c2"),M=a("f3bc"),Z=a("9398"),G=function(){var t=this,e=t._self._c;return t.ids&&t.ids.length?e("div",{staticClass:"m-archive-list"},[e("ul",{staticClass:"u-list"},[e("li",{staticClass:"u-item"},[e("a",{staticClass:"u-banner",attrs:{href:t.getLink(t.item),target:t.target}},[e("img",{key:t.item.ID,attrs:{src:t.getBanner(t.item.post_banner,t.item.post_subtype)}})]),e("h2",{staticClass:"u-post",class:{isSticky:t.item.sticky}},[e("svg",{class:"u-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 16",width:"12",height:"16","aria-hidden":"true",fill:"#555","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[e("path",{attrs:{"fill-rule":"evenodd",d:"M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"}})]),e("span",{staticClass:"u-label u-zlp"},[t._v("置顶")]),e("a",{staticClass:"u-title",style:t._f("showHighlight")(t.item.color),attrs:{href:t.getLink(t.item),target:t.target}},[t._v(t._s(t.item.post_title||"无标题"))]),t.item.mark&&t.item.mark.length?e("span",{staticClass:"u-marks"},t._l(t.item.mark,(function(a){return e("i",{key:a,staticClass:"u-mark"},[t._v(t._s(t._f("showMark")(a)))])})),0):t._e()]),e("div",{staticClass:"u-content u-desc"},[t._v(" "+t._s(t.item.post_excerpt||t.item.post_title||"这个作者很懒,什么都没有留下")+" ")]),e("div",{staticClass:"u-misc"},[e("div",{staticClass:"u-ids"},t._l(t.ids,(function(a,i){return e("div",{key:a,staticClass:"u-id",class:{active:t.current==a},on:{click:function(e){return e.stopPropagation(),t.onTopIdClick(a)}}},[t._v(" "+t._s(i+1)+" ")])})),0)])])])]):t._e()},N=[],D=a("cc9a"),z={name:"list_top",data:function(){return{ids:[],item:{},current:"",target:Object(h["buildTarget"])()}},mounted:function(){this.loadBreadcrumb()},methods:{loadBreadcrumb:function(){var t=this;Object(D["a"])("bbs_top").then((function(e){t.ids=e?null===e||void 0===e?void 0:e.split(","):[],t.ids.length&&(t.current=t.ids[0],t.loadPost())}))},getBanner:function(t,e){return t?Object(h["showBanner"])(t):p["__imgPath"]+"image/banner/".concat(l["a"]).concat(e)+".png"},showSubtype:function(t){var e;return(null===(e=v[t])||void 0===e?void 0:e.label)||""},loadPost:function(){var t=this,e={list:this.current};Object(C["b"])(e).then((function(e){t.item=e.data.data.list[0]}))},onTopIdClick:function(t){this.current=t,this.loadPost()},getLink:function(t){return Object(h["getLink"])(t.post_type,t.ID)}},filters:{authorLink:h["authorLink"],postLink:function(t){return location.origin+"/".concat(l["a"],"/")+t},showHighlight:function(t){return t?"color:".concat(t,";font-weight:600;"):""},showMark:function(t){return m["a"][t]||t},showAvatar:function(t){return Object(h["showAvatar"])(null===t||void 0===t?void 0:t.user_avatar)},showNickname:function(t){return(null===t||void 0===t?void 0:t.display_name)||"匿名"},dateFormat:function(t){return Object(b["a"])(new Date(t))}}},B=z,L=(a("c182"),Object(I["a"])(B,G,N,!1,null,null,null)),R=L.exports,E=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-bbs-top"},[t._m(0),e("div",{staticClass:"m-bbs-top__content"},t._l(t.data,(function(a){return e("div",{key:a.id,staticClass:"m-bbs-top__item"},[e("div",{staticClass:"m-item_left"},[e("div",{staticClass:"u-title",domProps:{innerHTML:t._s(a)}})])])})),0)])},Q=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-bbs-top__header"},[e("h3",{staticClass:"u-title"},[e("i",{staticClass:"el-icon-news"}),t._v("公告")])])}],Y=(a("e9c4"),{data:function(){return{data:[]}},mounted:function(){this.getBreadcrumb()},methods:{getBreadcrumb:function(){var t=this;try{var e=sessionStorage.getItem("bbs_ac");e?this.data=JSON.parse(e):Object(D["a"])("bbs_ac").then((function(e){t.data=e.split("\n"),sessionStorage.setItem("bbs_ac",JSON.stringify(t.data))}))}catch(a){this.data=[]}}}}),T=Y,x=(a("836c"),Object(I["a"])(T,E,Q,!1,null,null,null)),S=x.exports,P=function(){var t=this,e=t._self._c;return e("el-tabs",{staticClass:"m-tabs",on:{"tab-click":t.changeView},model:{value:t.view,callback:function(e){t.view=e},expression:"view"}},[e("el-tab-pane",{attrs:{label:"全部作品",name:"all"}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("img",{staticClass:"u-icon-img",attrs:{src:a("1d49"),alt:""}}),e("b",[t._v("全部作品")])])]),e("el-tab-pane",{attrs:{label:"攻略心得",name:"index"}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("img",{staticClass:"u-icon-img",attrs:{src:a("f283"),alt:""}}),e("b",[t._v("攻略心得")])])]),e("el-tab-pane",{attrs:{label:"萌新指南",name:"guide"}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("img",{staticClass:"u-icon-img",attrs:{src:a("1db0"),alt:""}}),e("b",[t._v("萌新指南")])])]),e("el-tab-pane",{attrs:{label:"江湖故事",name:"news"}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("img",{staticClass:"u-icon-img",attrs:{src:a("84d3"),alt:""}}),e("b",[t._v("江湖故事")])])]),e("el-tab-pane",{attrs:{label:"煮酒论剑",name:"fiction"}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("img",{staticClass:"u-icon-img",attrs:{src:a("33c0"),alt:""}}),e("b",[t._v("煮酒论剑")])])])],1)},W=[],U={all:"",index:1,guide:2,news:3,fiction:4},H={1:"index",2:"guide",3:"news",4:"fiction"},V={name:"tabs",props:[],data:function(){return{view:"all"}},watch:{$route:{handler:function(t){var e=t.query.subtype;"bbs"===t.name?this.view=e?H[e]||"bbs":"all":this.view=t.name},immediate:!0,deep:!0}},computed:{client:function(){return this.$store.state.client||"std"},isSuperAuthor:function(){return this.$store.state.isSuperAuthor||!1}},methods:{changeView:function(){var t="all"===this.view||U[this.view]?"index":this.view;this.$router.push({name:t,query:{subtype:U[this.view]}})}}},J=V,X=(a("a39e"),Object(I["a"])(J,P,W,!1,null,null,null)),F=X.exports,q=a("c402"),K=a("16e5"),$=(a("9911"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-index-rec"},[t._m(0),e("div",{staticClass:"u-ac",domProps:{innerHTML:t._s(t.ac)}}),e("el-row",[t._l(t.data,(function(a,i){return[e("el-col",{key:i,attrs:{span:8}},[e("div",{key:i+"header",staticClass:"m-header"},[t._v(t._s(a.label))]),t._l(a.menus,(function(a,i){return e("div",{key:i,staticClass:"u-rec"},[e("a",{directives:[{name:"reporter",rawName:"v-reporter",value:{data:{href:t.bbsLink(a.link)},caller:"bbs_suggest"},expression:"{\n                            data: {\n                                href: bbsLink(item.link),\n                            },\n                            caller: 'bbs_suggest',\n                        }"}],style:t.highLight(a.color),attrs:{href:a.link,target:"_blank"}},[t._v(" "+t._s(a.label)+" ")])])}))],2)]}))],2)],1)}),tt=[function(){var t=this,e=t._self._c;return e("h5",{staticClass:"u-title"},[e("span",[e("i",{staticClass:"el-icon-star-off"}),t._v("萌新完全指南")])])}],et={name:"rec_table",props:[],components:{},data:function(){return{data:[],ac:""}},computed:{client:function(){return this.$store.state.client}},methods:{bbsLink:function(t){var e="std"==this.client?"www":"origin";return"".concat(e,":").concat(t)},init:function(){var t=this;Object(D["c"])({key:"bbs_newbie_1,bbs_newbie_2,bbs_newbie_3"}).then((function(e){t.data=e||[]})),Object(D["a"])("bbs_newbie").then((function(e){t.ac=e||""}))},highLight:function(t){return t?"color:"+t:""},iconLink:function(t){return p["__imgPath"]+"image/xf/"+t+".png"}},mounted:function(){this.init()}},at=et,it=(a("f9ae"),Object(I["a"])(at,$,tt,!1,null,null,null)),nt=it.exports,st=a("a42e"),rt=a("7d14"),ct={name:"Index",props:[],data:function(){return{loading:!1,data:[],page:1,per:10,total:1,pages:1,number_queries:["per","page"],subtypes:M,subtype:"",order:"update",mark:"",client:this.$store.state.client,search:"",author:"",users:[],theme:[],tag:"",topicsCount:[],clients:{all:"全端",std:"重制",origin:"缘起",wujie:"无界"},showDesignTask:!1,currentPost:{}}},computed:{publish_link:function(){return Object(h["publishLink"])(l["a"])},hasNextPage:function(){return this.pages>1&&this.page<this.total},query:function(){return{subtype:this.subtype,order:this.order,mark:this.mark,client:this.client,topic:this.tag,author:this.author}},pg_queries:function(){return{page:this.page,per:this.per}},reset_queries:function(){return[this.subtype,this.tag]}},methods:{showAvatar:h["showAvatar"],filterUser:function(t){var e=this;""!==t?Object(q["e"])({name:t}).then((function(t){var a;e.users=(null===(a=t.data.data)||void 0===a?void 0:a.list)||[]})):this.users=[]},reporterLink:function(t){var e="std"===this.client?"www":"origin";return"".concat(e,":/").concat(l["a"],"/")+t},onSearch:function(){1===this.page?this.loadData():this.page=1},buildQuery:function(t){t&&(this.page+=1);var e={per:this.per,page:this.page,type:"bbs"};for(var a in this.query)void 0!==this.query[a]&&""!==this.query[a]&&null!==this.query[a]&&("search"==a?e.search=this.query.search.trim():"subtype"==a?~~this.subtype&&(e.subtype=this.subtype):e[a]=this.query[a]);return e.sticky=1,this.search&&(e.search=this.search.trim()),e},loadData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=this.buildQuery(e);return console.log("[cms-list]","<loading data>",a),this.loading=!0,Object(C["b"])(a).then(function(){var a=Object(o["a"])(Object(c["a"])().mark((function a(i){var n,s,r,o,l,u,d,h,p,m,b,v;return Object(c["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.data=e?t.data.concat(null===(d=i.data)||void 0===d||null===(h=d.data)||void 0===h?void 0:h.list):null===(p=i.data)||void 0===p||null===(m=p.data)||void 0===m?void 0:m.list,t.total=null===(n=i.data)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.total,t.pages=null===(r=i.data)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.pages,Object(K["b"])({caller:"bbs_index_load",data:{aggregate:null===(l=i.data)||void 0===l||null===(u=l.data)||void 0===u?void 0:u.list.map((function(e){return t.reporterLink(e.ID)}))}}),!f["a"].hasPermission("push_banner")||t.isPhone){a.next=10;break}return b=t.data.map((function(t){return t.ID})),a.next=8,Object(st["c"])({source_type:"bbs",ids:b.join(",")}).then((function(t){return t.data.data}));case 8:v=a.sent,t.data=t.data.map((function(e){var a=v.find((function(t){return t.source_id==e.ID}))||null;return t.$set(e,"log",a),e}));case 10:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}()).finally((function(){t.loading=!1}))},replaceRoute:function(t){return this.$router.push({name:this.$route.name,query:Object.assign({},this.$route.query,t)}).then((function(){window.scrollTo(0,0)})).catch((function(t){}))},filterMeta:function(t){this.replaceRoute(Object(r["a"])(Object(r["a"])({},t["type"],t["val"]),"page",1))},filterImperceptibly:function(t){this[t["type"]]=t["val"]},changePage:function(t){this.loadData(),this.replaceRoute({page:t})},appendPage:function(){this.loadData(!0)},setTag:function(t){this.tag=this.tag===t?"":t,this.replaceRoute({tag:this.tag})},loadCount:function(){var t=this;Object(C["c"])({post_type:"bbs"}).then((function(e){t.topicsCount=e.data.data}))},getCount:function(t){var e;return(null===(e=this.topicsCount.find((function(e){return e.topic==t})))||void 0===e?void 0:e.count)||0},getTopicBucket:function(){var t=this;Object(q["d"])({type:"bbs"}).then((function(e){var a,i=(null===(a=e.data.data)||void 0===a?void 0:a.map((function(t){return t.name})))||[];t.theme=Object(s["a"])(i)}))}},watch:{"$route.query":{deep:!0,immediate:!0,handler:function(t){if(Object.keys(t).length)for(var e in console.log("[cms-list]","<route query change>",t),t)this.number_queries.includes(e)?this[e]=~~t[e]:this[e]=t[e]}},reset_queries:{deep:!0,handler:function(){console.log("[cms-list]","<reset page>"),this.page=1}},query:{deep:!0,immediate:!0,handler:function(t){console.log("[cms-list]","<request query change>",t),this.loadData()}}},mounted:function(){var t=this;this.getTopicBucket(),k["a"].on("design-task",(function(e){t.currentPost=e,t.showDesignTask=!0}))},components:{listItem:O,ListLayout:Z["a"],"list-top":R,tabs:F,"list-notice":S,"list-guide-top":nt,DesignTask:rt["a"]}},ot=ct,lt=(a("3fd7"),Object(I["a"])(ot,i,n,!1,null,null,null));e["default"]=lt.exports},"6a4b":function(t,e,a){},7524:function(t,e,a){},7903:function(t){t.exports=JSON.parse('{"1":{"label":"攻略心得","val":"index"},"2":{"label":"萌新指南","val":"guide"},"3":{"label":"江湖故事","val":"news"},"4":{"label":"煮酒论剑","val":"fiction"}}')},"834d":function(t,e,a){},"836c":function(t,e,a){"use strict";a("11e5")},"84d3":function(t,e,a){t.exports=a.p+"img/story.9d9da369.svg"},"891b":function(t,e,a){"use strict";a("7524")},9398:function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("Header"),e("Breadcrumb",{attrs:{name:"竹林茶馆",slug:"bbs",publishEnable:!1,topicEnable:!1,adminEnable:!1,feedbackEnable:!0,crumbEnable:!0}},[e("Info"),e("publish-gate",{attrs:{slot:"op-append"},slot:"op-append"})],1),e("LeftSidebar",[e("Nav")],1),e("Main",{attrs:{withoutRight:!1}},[e("div",{staticClass:"m-main"},[t._t("default")],2),e("RightSidebar",{staticClass:"m-bbs-right-side",attrs:{"show-toggle":!0}},[e("Side",{staticClass:"m-extend"})],1),e("Footer")],1)],1)},n=[],s=(a("b0c0"),a("8f33")),r=a("3fac"),c=a("ee7f"),o=a("98e8"),l=a("85e4"),u={name:"ListLayout",props:[],data:function(){return{}},computed:{slug:function(){return this.$route.name}},methods:{getAppIcon:l["getAppIcon"]},components:{Nav:r["a"],"publish-gate":o["a"],Info:s["a"],Side:c["a"]}},d=u,h=(a("891b"),a("2877")),p=Object(h["a"])(d,i,n,!1,null,null,null);e["a"]=p.exports},a39e:function(t,e,a){"use strict";a("834d")},a42e:function(t,e,a){"use strict";a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return s})),a.d(e,"d",(function(){return r})),a.d(e,"b",(function(){return c}));var i=a("41cb"),n=function(t){return Object(i["a"])().get("/api/cms/design/task/log",{params:t})},s=function(t){return Object(i["a"])().post("/api/cms/design/task",t)},r=function(t){return Object(i["a"])().get("/api/cms/design/task/log",{params:t})},c=function(t){return Object(i["a"])().get("/api/cms/config/banner/types",{params:t})}},b3c6:function(t,e,a){},c182:function(t,e,a){"use strict";a("d623")},c8d2:function(t,e,a){"use strict";var i=a("5e77").PROPER,n=a("d039"),s=a("5899"),r="​᠎";t.exports=function(t){return n((function(){return!!s[t]()||r[t]()!==r||i&&s[t].name!==t}))}},d623:function(t,e,a){},d8ad:function(t,e,a){"use strict";var i=a("1344"),n=Object(i["a"])();e["a"]=n},f283:function(t,e,a){t.exports=a.p+"img/game.931d7cda.png"},f3bc:function(t){t.exports=JSON.parse('{"1":{"label":"攻略心得","icon":"el-icon-collection"},"2":{"label":"江湖回忆","icon":"el-icon-headset"},"3":{"label":"同人创作","icon":"el-icon-film"},"4":{"label":"交流讨论","icon":"el-icon-chat-line-square"}}')},f9ae:function(t,e,a){"use strict";a("b3c6")}}]);
//# sourceMappingURL=chunk-ccdd7b9e.48e90120.js.map