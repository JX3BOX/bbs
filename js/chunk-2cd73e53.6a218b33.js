(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2cd73e53"],{"04d1":function(t,e,a){"use strict";var i=a("342f"),s=i.match(/firefox\/(\d+)/i);t.exports=!!s&&+s[1]},"0f32":function(t,e,a){var i=a("b047c"),s=a("1a8c"),n="Expected a function";function o(t,e,a){var o=!0,r=!0;if("function"!=typeof t)throw new TypeError(n);return s(a)&&(o="leading"in a?!!a.leading:o,r="trailing"in a?!!a.trailing:r),i(t,e,{leading:o,maxWait:e,trailing:r})}t.exports=o},"1f19":function(t,e,a){t.exports=a.p+"img/labor.69cd08d3.gif"},"2acb":function(t,e,a){},"3a67":function(t,e,a){"use strict";a("90d6")},"4d63":function(t,e,a){"use strict";var i=a("83ab"),s=a("da84"),n=a("e330"),o=a("94ca"),r=a("7156"),c=a("9112"),l=a("7c73"),u=a("241c").f,d=a("3a9b"),h=a("44e7"),g=a("577e"),p=a("90d8"),f=a("9f7f"),m=a("aeb0"),v=a("cb2d"),_=a("d039"),y=a("1a2d"),b=a("69f3").enforce,C=a("2626"),w=a("b622"),x=a("fce3"),k=a("107c"),S=w("match"),L=s.RegExp,P=L.prototype,T=s.SyntaxError,j=n(P.exec),O=n("".charAt),F=n("".replace),N=n("".indexOf),z=n("".slice),E=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,I=/a/g,B=/a/g,A=new L(I)!==I,R=f.MISSED_STICKY,D=f.UNSUPPORTED_Y,$=i&&(!A||R||x||k||_((function(){return B[S]=!1,L(I)!==I||L(B)===B||"/a/i"!==String(L(I,"i"))}))),q=function(t){for(var e,a=t.length,i=0,s="",n=!1;i<=a;i++)e=O(t,i),"\\"!==e?n||"."!==e?("["===e?n=!0:"]"===e&&(n=!1),s+=e):s+="[\\s\\S]":s+=e+O(t,++i);return s},U=function(t){for(var e,a=t.length,i=0,s="",n=[],o=l(null),r=!1,c=!1,u=0,d="";i<=a;i++){if(e=O(t,i),"\\"===e)e+=O(t,++i);else if("]"===e)r=!1;else if(!r)switch(!0){case"["===e:r=!0;break;case"("===e:j(E,z(t,i+1))&&(i+=2,c=!0),s+=e,u++;continue;case">"===e&&c:if(""===d||y(o,d))throw new T("Invalid capture group name");o[d]=!0,n[n.length]=[d,u],c=!1,d="";continue}c?d+=e:s+=e}return[s,n]};if(o("RegExp",$)){for(var M=function(t,e){var a,i,s,n,o,l,u=d(P,this),f=h(t),m=void 0===e,v=[],_=t;if(!u&&f&&m&&t.constructor===M)return t;if((f||d(P,t))&&(t=t.source,m&&(e=p(_))),t=void 0===t?"":g(t),e=void 0===e?"":g(e),_=t,x&&"dotAll"in I&&(i=!!e&&N(e,"s")>-1,i&&(e=F(e,/s/g,""))),a=e,R&&"sticky"in I&&(s=!!e&&N(e,"y")>-1,s&&D&&(e=F(e,/y/g,""))),k&&(n=U(t),t=n[0],v=n[1]),o=r(L(t,e),u?this:P,M),(i||s||v.length)&&(l=b(o),i&&(l.dotAll=!0,l.raw=M(q(t),a)),s&&(l.sticky=!0),v.length&&(l.groups=v)),t!==_)try{c(o,"source",""===_?"(?:)":_)}catch(y){}return o},H=u(L),W=0;H.length>W;)m(M,L,H[W++]);P.constructor=M,M.prototype=P,v(s,"RegExp",M,{constructor:!0})}C("RegExp")},"4e82":function(t,e,a){"use strict";var i=a("23e7"),s=a("e330"),n=a("59ed"),o=a("7b0b"),r=a("07fa"),c=a("083a"),l=a("577e"),u=a("d039"),d=a("addb"),h=a("a640"),g=a("04d1"),p=a("d998"),f=a("2d00"),m=a("512ce"),v=[],_=s(v.sort),y=s(v.push),b=u((function(){v.sort(void 0)})),C=u((function(){v.sort(null)})),w=h("sort"),x=!u((function(){if(f)return f<70;if(!(g&&g>3)){if(p)return!0;if(m)return m<603;var t,e,a,i,s="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:a=3;break;case 68:case 71:a=4;break;default:a=2}for(i=0;i<47;i++)v.push({k:e+i,v:a})}for(v.sort((function(t,e){return e.v-t.v})),i=0;i<v.length;i++)e=v[i].k.charAt(0),s.charAt(s.length-1)!==e&&(s+=e);return"DGBEFHACIJK"!==s}})),k=b||!C||!w||!x,S=function(t){return function(e,a){return void 0===a?-1:void 0===e?1:void 0!==t?+t(e,a)||0:l(e)>l(a)?1:-1}};i({target:"Array",proto:!0,forced:k},{sort:function(t){void 0!==t&&n(t);var e=o(this);if(x)return void 0===t?_(e):_(e,t);var a,i,s=[],l=r(e);for(i=0;i<l;i++)i in e&&y(s,e[i]);d(s,S(t)),a=r(s),i=0;while(i<a)e[i]=s[i++];while(i<l)c(e,i++);return e}})},"4f9d":function(t,e,a){},"512ce":function(t,e,a){"use strict";var i=a("342f"),s=i.match(/AppleWebKit\/(\d+)\./);t.exports=!!s&&+s[1]},7427:function(t,e,a){t.exports=a.p+"img/ewm.3c5a7614.png"},"83e4":function(t,e,a){t.exports=a.p+"img/topic.b1e13fd5.svg"},"86db":function(t,e,a){t.exports=a.p+"img/event.1cbfd0a6.svg"},8838:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("CommunityLayout",[e("CommunityHeader",{attrs:{categoryList:t.categoryList}}),e("CommunitySearch",{ref:"searchInput",on:{search:t.onSearch}}),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-community-content"},[t.isSearch?e("div",[e("CommunitySearchList",{attrs:{list:t.searchList,keyword:t.searchParams.q},on:{search:t.onSearch,close:t.onCloseSearch}},[e("CommunityPagination",{attrs:{total:t.total,per:t.per,"current-page":t.page,loading:t.loading,"has-next-page":t.hasNextPage},on:{"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e},"current-change":t.changePage,"append-page":t.appendPage}})],1)],1):e("div",[t.topTopicData?e("TopicTop",{attrs:{data:t.topTopicData}}):t._e(),t.list.length?e("div",{staticClass:"m-topic-list"},[e("Waterfall",{ref:"waterfall",attrs:{col:t.col,autoResize:!0,moveTransitionDuration:0,fillBox:!0,list:t.list,gutter:10},scopedSlots:t._u([{key:"default",fn:function(t){return e("div",{class:{fadeIn:"show"==t.state}},[e("TopicItem",{key:t.data.id,attrs:{data:t.data}})],1)}}],null,!1,4056359723)})],1):t._e(),e("CommunityPagination",{ref:"paginationRef",attrs:{total:t.total,per:t.per,"current-page":t.page,loading:t.loading,"has-next-page":t.hasNextPage},on:{"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e},"current-change":t.changePage,"append-page":t.appendPage}})],1)])],1)},s=[],n=a("5530"),o=(a("99af"),a("7db0"),a("caad"),a("14d9"),a("b0c0"),a("b64b"),a("d3b7"),a("2532"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-community-layout",attrs:{id:"app"}},[e("Header"),e("Breadcrumb",{attrs:{name:"魔盒论坛",slug:"community",publishEnable:!1,topicEnable:!1,adminEnable:!1,feedbackEnable:!0,crumbEnable:!0}},[e("Info"),e("publish-gate",{attrs:{slot:"op-append"},slot:"op-append"})],1),e("LeftSidebar",[e("Nav")],1),e("Main",{attrs:{withoutRight:!1}},[e("div",{staticClass:"m-main"},[t._t("default")],2),e("RightSidebar",{staticClass:"m-bbs-right-side",attrs:{"show-toggle":!0}},[e("Side",{staticClass:"m-extend"})],1),e("Footer")],1)],1)}),r=[],c=a("8f33"),l=a("3fac"),u=a("ee7f"),d=a("98e8"),h=a("85e4"),g={name:"CommunityLayout",props:[],data:function(){return{}},computed:{slug:function(){return this.$route.name}},methods:{getAppIcon:h["getAppIcon"]},components:{Nav:l["a"],"publish-gate":d["a"],Info:c["a"],Side:u["a"]}},p=g,f=(a("cfb1"),a("2877")),m=Object(f["a"])(p,o,r,!1,null,null,null),v=m.exports,_=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-community-header"},[t._m(0),e("div",{staticClass:"m-community-header__tags",style:{gridTemplateColumns:"repeat(".concat(t.lineCount,", 1fr)")}},[t._l(t.showNavList,(function(i,s){return e("el-popover",{key:s,attrs:{"popper-class":"m-community-header__popover",placement:(s+1)/t.lineCount>1?"bottom":"top",trigger:"hover",content:i.remark}},[e("a",{class:"\n                ".concat(t.selectedCategory===i.value&&"u-active","\n                ").concat(i.mark&&"has-mark","\n                u-item"),style:{"--hover-bg-color":i.hoverColor,"--hover-color":i.color},attrs:{slot:"reference",href:i.href||"javascript:;"},on:{click:function(e){return t.handleChange(i)}},slot:"reference"},[e("span",[t._v(t._s(i.name))]),e("img",{directives:[{name:"svg-inline",rawName:"v-svg-inline"}],staticClass:"u-icon",attrs:{src:a("1c2f")("./".concat(i.icon,".svg"))}}),i.mark&&i.mark.indexOf(".svg")>=0?e("img",{directives:[{name:"svg-inline",rawName:"v-svg-inline"}],staticClass:"u-mark",style:{color:i.color},attrs:{src:a("97ee")("./".concat(i.mark))}}):i.mark?e("img",{staticClass:"u-mark",attrs:{src:a("97ee")("./".concat(i.mark))}}):t._e()])])})),e("el-dropdown",{attrs:{trigger:"click",size:"small",disabled:0===t.moreNavList.length}},[e("a",{class:"u-item u-more ".concat(0===t.moreNavList.length&&"is-disabled"),attrs:{href:"javascript:;"}},[e("span",[t._v("更多")]),e("i",{staticClass:"el-icon-arrow-down"})]),e("el-dropdown-menu",{staticClass:"m-community-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.moreNavList,(function(i,s){return e("el-dropdown-item",{key:s,staticClass:"m-community-dropdown__item",style:{"--hover-bg-color":i.hoverColor,"--hover-color":i.color,"--active-color":i.activeColor||"#fff"}},[e("a",{class:"".concat(t.selectedCategory===i.value&&"active"," u-item"),attrs:{href:i.href||"javascript:;"},on:{click:function(e){return t.handleChange(i)}}},[e("span",[t._v(" "+t._s(i.name))]),e("img",{directives:[{name:"svg-inline",rawName:"v-svg-inline"}],staticClass:"u-icon",attrs:{src:a("1c2f")("./".concat(i.icon,".svg"))}})])])})),1)],1)],2),t._m(1)])},y=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-community-publish"},[e("a",{staticClass:"u-publish",attrs:{href:"/publish/#/community",target:"_blank"}})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-community-header__special-box"},[e("div",{staticClass:"m-community-header__special-list"},[e("a",{attrs:{href:"/event",target:"_blank"}},[e("img",{attrs:{src:a("86db"),alt:"活动专题"}}),e("span",[t._v("活动专题")])]),e("a",{attrs:{href:"/topic",target:"_blank"}},[e("img",{attrs:{src:a("83e4"),alt:"资料片专题"}}),e("span",[t._v("资料片专题")])])]),e("img",{staticClass:"u-ewm",attrs:{src:a("7427"),alt:"",srcset:""}})])}],b=a("2909"),C=(a("fb6a"),{name:"CommunityHeader",props:["categoryList"],inject:["onCategoryChange"],data:function(){return{selectedCategory:"",showNavList:[],moreNavList:[],hoveredItem:null,lineCount:8}},mounted:function(){window.addEventListener("resize",this.handleResize),this.handleResize()},beforeDestroy:function(){window.removeEventListener("resize",this.handleResize)},watch:{lineCount:function(){this.initNavList()},categoryList:{deep:!0,immediate:!0,handler:function(){this.initNavList()}},"$route.query":{deep:!0,immediate:!0,handler:function(t){Object.keys(t).length&&t.category&&(this.selectedCategory=t.category)}}},methods:{handleResize:function(){window.innerWidth>=520?this.lineCount=8:this.lineCount=5},initNavList:function(){var t=2*this.lineCount-1,e=Object(b["a"])(this.categoryList);this.showNavList=e.slice(0,t),this.moreNavList=e.slice(t)},handleChange:function(t){if(!t.href){var e="";this.selectedCategory!=t.value&&(e=t.value),this.selectedCategory=e,this.onCategoryChange(e)}}}}),w=C,x=(a("3a67"),Object(f["a"])(w,_,y,!1,null,null,null)),k=x.exports,S=(a("ac1f"),a("841c"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-search-wrapper",class:{"u-sticky":t.inSearch}},[e("div",{class:"m-community-search ".concat(t.isFocus&&"is-focus")},[e("div",{staticClass:"m-search-button",on:{click:t.onSearch}},[e("i",{staticClass:"el-icon-search"}),e("span",{staticClass:"u-button-text"},[t._v("搜一下")])]),e("div",{staticClass:"m-search-input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],ref:"input",staticClass:"u-input",attrs:{placeholder:"查找帖子",type:"text"},domProps:{value:t.search},on:{blur:t.onBlur,focus:function(e){t.isFocus=!0},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSearch.apply(null,arguments)},input:function(e){e.target.composing||(t.search=e.target.value)}}})])])])}),L=[],P={name:"CommunitySearch",data:function(){return{searchList:[],isFocus:!1,search:"",inSearch:!1}},methods:{onSearch:function(){this.isFocus||this.inSearch?(this.inSearch=!0,this.$emit("search",{q:this.search})):this.$refs.input.focus()},onBlur:function(){this.search||this.inSearch||(this.isFocus=!1)},closeSearch:function(){this.search="",this.isFocus=!1,this.inSearch=!1}}},T=P,j=(a("9b6e"),Object(f["a"])(T,S,L,!1,null,"4691a17c",null)),O=j.exports,F=a("d049"),N=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-topic-box"},[e("div",{staticClass:"m-topic-top"},[e("div",{staticClass:"m-topic-top__time"},[e("i",{class:t.getTimeAgo(t.data.updated_at).icon}),e("span",[t._v(t._s(t.getTimeAgo(t.data.updated_at).text)+" ")])]),e("div",{class:"m-topic-category",style:"background-color: ".concat(t.styles.hoverColor,";color:").concat(t.styles.color,";"),on:{click:function(e){return t.onCategoryChange(t.data.category)}}},[e("img",{directives:[{name:"svg-inline",rawName:"v-svg-inline"}],staticClass:"u-icon",attrs:{src:a("1c2f")("./".concat(t.styles.icon,".svg"))}}),e("div",[t._v(t._s(t.data.category))])])]),e("div",{staticClass:"u-box m-topic-box__content"},[e("div",{staticClass:"u-content-aside"},[e("a",{staticClass:"m-topic-title",attrs:{href:t.getPostUrl(t.data.id),target:"_blank"}},[t.isTop?e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none","svg-inline":"",srcset:"",role:"presentation",focusable:"false",tabindex:"-1"}},[e("rect",{attrs:{width:"24",height:"24",rx:"4",fill:"#FF6969"}}),e("path",{attrs:{"fill-rule":"evenodd",fill:"#FFF",d:"M21 6H3V4h18v2zm-1 7.778L12 8l-8 5.778h6V21h4v-7.222h6z"}})]):t._e(),t.data.is_star?e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none","svg-inline":"",srcset:"",role:"presentation",focusable:"false",tabindex:"-1"}},[e("rect",{attrs:{width:"24",height:"24",rx:"4",fill:"#FFBB69"}}),e("path",{attrs:{d:"M21 12l-6.582-2.418L12 3 9.582 9.582 3 12l6.582 2.418L12 21l2.418-6.582L21 12z",fill:"#FFF"}})]):t._e(),e("span",[t._v(t._s(t.data.title))])]),e("a",{staticClass:"u-cover",attrs:{href:t.getPostUrl(t.data.id),target:"_blank"}},[e("img",{attrs:{src:t.getBanner(t.data.banner_img),alt:"",srcset:""}})]),t.data.tags&&t.data.tags.length?e("div",{staticClass:"m-topic-tag"},t._l(t.data.tags,(function(a,i){return e("span",{key:i},[t._v(" "+t._s(a)+" ")])})),0):t._e(),t.data.collection_id&&t.data.collection.id&&t.data.collection.title?e("div",{staticClass:"m-topic-collection"},[e("a",{attrs:{href:"/collection/".concat(t.data.collection_id),target:"_blank"}},[e("span",{staticClass:"u-label"},[t._v("小册")]),e("span",{staticClass:"u-value"},[t._v(t._s(t.data.collection.title))])])]):t._e(),e("div",{staticClass:"m-topic-userInfo"},[e("a",{attrs:{href:t.authorLink(t.data.ext_user_info.id),target:"_blank"}},[e("img",{staticClass:"m-topic-userInfo__avatar",attrs:{src:t.showAvatar(),alt:"",srcset:""}}),e("span",{staticClass:"m-topic-userInfo__name"},[t._v(t._s(t.data.ext_user_info.display_name))])])])]),e("a",{staticClass:"u-box-content",attrs:{href:t.getPostUrl(t.data.id),target:"_blank"}},[e("a",{staticClass:"m-topic-content",attrs:{href:t.getPostUrl(t.data.id),target:"_blank"}},[e("span",{staticClass:"m-topic-title",attrs:{target:"_blank"}},[t.isTop?e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none","svg-inline":"",srcset:"",role:"presentation",focusable:"false",tabindex:"-1"}},[e("rect",{attrs:{width:"24",height:"24",rx:"4",fill:"#FF6969"}}),e("path",{attrs:{"fill-rule":"evenodd",fill:"#FFF",d:"M21 6H3V4h18v2zm-1 7.778L12 8l-8 5.778h6V21h4v-7.222h6z"}})]):t._e(),t.data.is_star?e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none","svg-inline":"",srcset:"",role:"presentation",focusable:"false",tabindex:"-1"}},[e("rect",{attrs:{width:"24",height:"24",rx:"4",fill:"#FFBB69"}}),e("path",{attrs:{d:"M21 12l-6.582-2.418L12 3 9.582 9.582 3 12l6.582 2.418L12 21l2.418-6.582L21 12z",fill:"#FFF"}})]):t._e(),e("span",[t._v(t._s(t.data.title))])]),e("div",{domProps:{innerHTML:t._s(t.introduction)}})]),t.data.extra_images&&t.data.extra_images.length?e("div",{staticClass:"m-topic-imgs"},t._l(t.data.extra_images,(function(a,i){return e("a",{key:i,staticClass:"u-item"},[e("img",{attrs:{src:t.getSquareBanner(a)}})])})),0):t._e()])])])},z=[],E=a("65c2"),I=a("2ef0"),B=a("fb92"),A={props:["data"],inject:["getCategoryStyle","onCategoryChange"],data:function(){return{}},computed:{styles:function(){return this.getCategoryStyle(this.data.category||"")},introduction:function(){var t=this.data;return t.introduction?t.introduction.length>=200?t.introduction+"...":t.introduction.length<=0?"......":t.introduction:""},isTop:function(){return this.data.is_top||this.data.is_category_top}},methods:{getTimeAgo:B["c"],authorLink:h["authorLink"],getBanner:function(t){if(t)return t.indexOf("jx3box.com")>=0?Object(h["getThumbnail"])(t,[336,176]):t;var e=Object(I["random"])(1,39);return E["__cdn"]+"design/random_cover/".concat(e,".jpg")},getSquareBanner:function(t){return t.indexOf("jx3box.com")>=0?Object(h["getThumbnail"])(t,96):t},showAvatar:function(){var t,e;return Object(h["showAvatar"])(null===(t=this.data)||void 0===t||null===(e=t.ext_user_info)||void 0===e?void 0:e.avatar)},getPostUrl:function(t){return"/community/".concat(t)}}},R=A,D=Object(f["a"])(R,N,z,!1,null,null,null),$=D.exports,q=a("81fc"),U=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"m-topic-hot m-topic-box"},[e("div",{staticClass:"m-topic-top"},[e("div",{staticClass:"m-topic-top__time"},[e("i",{class:t.getTimeAgo(t.data.updated_at).icon}),e("span",[t._v(t._s(t.getTimeAgo(t.data.updated_at).text)+" ")])]),e("div",{class:"m-topic-category",style:"background-color: ".concat(t.styles.hoverColor,";color:").concat(t.styles.color,";"),on:{click:function(e){return t.onCategoryChange(t.data.category)}}},[e("img",{directives:[{name:"svg-inline",rawName:"v-svg-inline"}],staticClass:"u-icon",attrs:{src:a("1c2f")("./".concat(t.styles.icon,".svg"))}}),e("div",[t._v(t._s(t.data.category))])])]),e("div",{staticClass:"m-topic-box__content"},[e("div",{staticClass:"m-topic-hot__left"},[e("a",{staticClass:"u-cover",attrs:{href:t.getPostUrl(t.data.id)}},[e("img",{attrs:{src:t.getBanner(t.data.banner_img),alt:"",srcset:""}})]),e("div",{staticClass:"m-topic-imgs"},t._l(t.data.extra_images,(function(a,i){return e("a",{key:i,staticClass:"u-item",attrs:{href:t.getPostUrl(t.data.id)}},[e("img",{attrs:{src:t.getSquareBanner(a)}})])})),0)]),e("div",{staticClass:"m-topic-hot__right"},[e("a",{staticClass:"u-title",attrs:{href:t.getPostUrl(t.data.id),target:"_blank"}},[t.isTop?e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none","svg-inline":"",srcset:"",role:"presentation",focusable:"false",tabindex:"-1"}},[e("rect",{attrs:{width:"24",height:"24",rx:"4",fill:"#FF6969"}}),e("path",{attrs:{"fill-rule":"evenodd",fill:"#FFF",d:"M21 6H3V4h18v2zm-1 7.778L12 8l-8 5.778h6V21h4v-7.222h6z"}})]):t._e(),t.data.is_star?e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none","svg-inline":"",srcset:"",role:"presentation",focusable:"false",tabindex:"-1"}},[e("rect",{attrs:{width:"24",height:"24",rx:"4",fill:"#FFBB69"}}),e("path",{attrs:{d:"M21 12l-6.582-2.418L12 3 9.582 9.582 3 12l6.582 2.418L12 21l2.418-6.582L21 12z",fill:"#FFF"}})]):t._e(),e("span",[t._v(" "+t._s(t.data.title)+" ")])]),t.data.tags&&t.data.tags.length?e("div",{staticClass:"m-topic-tag"},t._l(t.data.tags,(function(a,i){return e("span",{key:i},[t._v(" "+t._s(a)+" ")])})),0):t._e(),t.data.collection_id&&t.data.collection.id&&t.data.collection.title?e("div",{staticClass:"m-topic-collection"},[e("a",{attrs:{href:"/collection/".concat(t.data.collection_id)}},[e("span",{staticClass:"u-label"},[t._v("小册")]),e("span",{staticClass:"u-value"},[t._v(t._s(t.data.collection.title))])])]):t._e(),e("div",{staticClass:"m-topic-userInfo"},[e("a",{attrs:{href:t.authorLink(t.data.ext_user_info.id),target:"_blank"}},[e("img",{staticClass:"m-topic-userInfo__avatar",attrs:{src:t.showAvatar(),alt:"",srcset:""}}),e("span",{staticClass:"m-topic-userInfo__name"},[t._v(t._s(t.data.ext_user_info.display_name))])])]),e("a",{staticClass:"m-topic-content",attrs:{href:t.getPostUrl(t.data.id),target:"_blank"}},[e("div",{domProps:{innerHTML:t._s(t.introduction)}})])])])]),e("div",{staticClass:"m-topic-list m-topic-hot__mini"},[e("TopicItem",{attrs:{data:t.data}})],1)])},M=[],H={props:["data"],inject:["getCategoryStyle","onCategoryChange"],components:{TopicItem:$},computed:{introduction:function(){var t=this.data;return t.introduction?t.introduction.length>=200?t.introduction+"...":t.introduction.length<=0?"......":t.introduction:""},styles:function(){return this.getCategoryStyle(this.data.category||"")},isTop:function(){return this.data.is_top||this.data.is_category_top}},methods:{getTimeAgo:B["c"],authorLink:h["authorLink"],showAvatar:function(){var t,e;return Object(h["showAvatar"])(null===(t=this.data)||void 0===t||null===(e=t.ext_user_info)||void 0===e?void 0:e.avatar)},getBanner:function(t){if(t)return t.indexOf("jx3box.com")>=0?Object(h["getThumbnail"])(t,[672,352]):t;var e=Object(I["random"])(1,39);return E["__cdn"]+"design/random_cover/".concat(e,".jpg")},getPostUrl:function(t){return"/community/".concat(t)},getSquareBanner:function(t){return t.indexOf("jx3box.com")>=0?Object(h["getThumbnail"])(t,96):t}}},W=H,V=(a("e6a1"),Object(f["a"])(W,U,M,!1,null,null,null)),K=V.exports,J=a("6f4a"),Y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-search_all"},[e("div",{ref:"toolbar",staticClass:"m-search-toolbar"},[e("el-radio-group",{attrs:{size:"small"},model:{value:t.filter_name,callback:function(e){t.filter_name=e},expression:"filter_name"}},[e("el-radio-button",{attrs:{label:"community_discussion_topic,community_discussion_topic_reply"}},[t._v("全部")]),e("el-radio-button",{attrs:{label:"community_discussion_topic"}},[t._v("帖子")]),e("el-radio-button",{attrs:{label:"community_discussion_topic_reply"}},[t._v("回帖")])],1),e("el-button",{staticClass:"u-close-btn",attrs:{size:"small",type:"info",icon:"el-icon-close"},on:{click:t.closeSearch}},[t._v("关闭搜索")])],1),t.list.length?e("ul",{staticClass:"m-result m-post"},t._l(t.list,(function(a,i){return e("li",{key:i,staticClass:"u-item"},[e("div",{staticClass:"u-info"},[e("a",{staticClass:"u-title",attrs:{href:t.resultLink(a),target:"_blank"}},["community_discussion_topic"===a.name?e("el-tag",{staticClass:"u-type",attrs:{type:"warning",size:"small"}},[e("i",{staticClass:"el-icon-collection-tag"}),t._v(" 帖子 ")]):t._e(),"community_discussion_topic_reply"===a.name?e("el-tag",{staticClass:"u-type",attrs:{type:"info",size:"small"}},[e("i",{staticClass:"el-icon-chat-line-round"}),t._v(" 回帖 ")]):t._e(),e("span",{staticClass:"u-text",domProps:{innerHTML:t._s(t.highlightText(a.title||a.content||"无内容"))}})],1),e("span",{staticClass:"u-link"},[e("span",{staticClass:"u-date"},[e("i",{staticClass:"el-icon-time"}),t._v(" "+t._s(a.updated_at))]),e("i",{staticClass:"el-icon-user"}),t._v(" "+t._s(a.author)+" ")])])])})),0):e("div",[e("el-alert",{staticClass:"m-null",attrs:{title:"没有搜索到相关数据",type:"info","show-icon":""}})],1),t._t("default")],2)},Q=[],G=(a("4d63"),a("c607"),a("2c3e"),a("25f0"),a("5319"),a("9911"),{name:"CommunitySearchList",props:{keyword:{type:String,default:""},list:{type:Array,default:function(){return[]}}},data:function(){return{filter_name:"community_discussion_topic,community_discussion_topic_reply"}},watch:{filter_name:function(){this.$emit("search",{filter_name:this.filter_name})}},methods:{closeSearch:function(){this.filter_name="community_discussion_topic,community_discussion_topic_reply",this.$emit("close")},resultLink:function(t){var e=t.link;return e},clientKey:function(t){return E["__clients"][t]},highlightText:function(t){var e=new RegExp("(".concat(this.keyword,")"),"gi");return t=t.replace(e,'<span style="background-color: #ffff00; color: #ff0000;">$1</span>'),t}}}),X=G,Z=(a("e7ec"),Object(f["a"])(X,Y,Q,!1,null,"30bdb856",null)),tt=Z.exports,et=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-topic-pagination"},[e("el-button",{staticClass:"m-topic-pages",style:{fontSize:t.hasNextPage?"14px":"12px"},attrs:{type:t.hasNextPage?"primary":"text",loading:t.loading,disabled:!t.hasNextPage,icon:t.hasNextPage?"el-icon-arrow-down":""},on:{click:t.appendPage}},[t._v(" "+t._s(t.hasNextPage?"加载更多":"没有更多了")+" ")]),e("el-pagination",{staticClass:"m-community-pages",attrs:{background:"",layout:"total, prev, pager, next, jumper","hide-on-single-page":!0,"page-size":t.per,total:t.total,"current-page":t.localCurrentPage},on:{"update:currentPage":function(e){t.localCurrentPage=e},"update:current-page":function(e){t.localCurrentPage=e},"current-change":t.handlePageChange}})],1)},at=[],it=(a("a9e3"),{name:"PaginationComponent",props:{per:{type:Number,default:10},total:{type:Number,required:!0},currentPage:{type:Number,default:1},loading:{type:Boolean,default:!1},hasNextPage:{type:Boolean,default:!1}},data:function(){return{localCurrentPage:this.currentPage}},watch:{currentPage:function(t){this.localCurrentPage=t}},methods:{appendPage:function(){this.$emit("append-page")},handlePageChange:function(t){this.localCurrentPage=t,this.$emit("update:currentPage",t),this.$emit("current-change",t)}}}),st=it,nt=Object(f["a"])(st,et,at,!1,null,null,null),ot=nt.exports,rt=a("0f32"),ct=a.n(rt),lt="community_discussion_topic,community_discussion_topic_reply",ut={components:{CommunityPagination:ot,CommunityLayout:v,CommunityHeader:k,CommunitySearch:O,CommunitySearchList:tt,Waterfall:F["a"],TopicItem:$,TopicTop:K},data:function(){return{searchParams:{q:"",filter_name:lt},loading:!1,col:1,page:1,total:0,per:18,pages:0,number_queries:["per","page"],category:void 0,list:[],searchList:[],isSearch:!1,topTopicData:null,categoryList:[]}},computed:{hasNextPage:function(){return this.pages>=1&&this.per*this.page<this.total}},provide:function(){return{onCategoryChange:this.onCategoryChange,getCategoryStyle:this.getCategoryStyle}},mounted:function(){window.addEventListener("resize",this.handleResize),window.addEventListener("scroll",this.handleScroll),this.handleResize(),this.loadData(),this.getCategoryList()},beforeDestroy:function(){window.removeEventListener("resize",this.handleResize),window.removeEventListener("scroll",this.handleScroll)},watch:{"$route.query":{deep:!0,immediate:!0,handler:function(t){if(Object.keys(t).length)for(var e in t)this.number_queries.includes(e)?this[e]=~~t[e]:this[e]=t[e]}},list:{handler:function(t){t.length&&this.$refs.waterfall&&this.$refs.waterfall.repaints()},deep:!0}},methods:{handleScroll:function(){var t=this.$refs.paginationRef;if(t&&this.hasNextPage){var e=t.$el.offsetTop;window.scrollY+window.innerHeight>e&&this.appendPage()}},onCloseSearch:function(){this.isSearch=!1,this.page=1,this.total=0,this.per=18,this.pages=0,this.searchParams={q:"",filter_name:"community_discussion_topic,community_discussion_topic_reply"},this.$refs.searchInput&&this.$refs.searchInput.closeSearch(),this.loadData()},handleResize:function(){window.innerWidth>1920?this.col=3:window.innerWidth>1200?this.col=2:this.col=1},onSearch:function(t){this.isSearch=!0,this.page=1,this.total=0,this.per=20,this.pages=0,this.searchParams=Object(n["a"])(Object(n["a"])({},this.searchParams),t),this.loadSearchData()},onCategoryChange:function(t){this.category=t,this.$refs.searchInput&&this.$refs.searchInput.closeSearch(),this.loadData()},changePage:function(){this.isSearch?this.loadSearchData():this.loadData()},replaceRoute:function(t){return this.$router.push({name:this.$route.name,query:Object.assign({},this.$route.query,t)})},appendPage:ct()((function(){this.isSearch?this.loadSearchData(!0):this.loadData(!0)}),500),buildQuery:function(t){t&&(this.page+=1);var e={category:this.category,pageSize:this.per,index:this.page};return this.replaceRoute({category:this.category,page:this.page}),e},loadData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isSearch=!1;var a=this.buildQuery(e);this.loading=!0,Object(q["h"])(a).then((function(i){var s=i.data.data.list;e?t.list=t.list.concat(s||[]):(1===a.index&&s&&s.length?t.topTopicData=s.shift():t.topTopicData=null,t.list=s||[],t.$nextTick((function(){window.scrollTo(0,0)}))),t.total=i.data.data.page.total,t.pages=i.data.data.page.pageTotal})).finally((function(){t.loading=!1}))},loadSearchData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(this.page+=1),this.loading=!0,Object(q["j"])(Object(n["a"])(Object(n["a"])({},this.searchParams),{},{pageIndex:this.page})).then((function(a){t.searchList=e?t.searchList.concat(a.data.data.hits||[]):a.data.data.hits||[];var i=a.data.data.page;t.total=i.total,t.pages=i.pageTotal,t.page=i.pageIndex})).finally((function(){t.loading=!1}))},getCategoryList:function(){var t=this;Object(q["f"])({type:"community"}).then((function(e){t.categoryList=Object(J["a"])(e.data.data)}))},getCategoryStyle:function(t){var e=this.categoryList.find((function(e){return e.value===t}));return e||{icon:"game",hoverColor:"rgba(235, 244, 255, 1)",color:"rgba(64, 128, 255, 1)"}}}},dt=ut,ht=(a("adcd"),Object(f["a"])(dt,i,s,!1,null,null,null));e["default"]=ht.exports},"90d6":function(t,e,a){},"97ee":function(t,e,a){var i={"./all.svg":"4645","./game.svg":"8ffe","./join.svg":"2f43","./labor.gif":"1f19","./labor.svg":"a6f6","./love.svg":"c736","./sns.svg":"af1b","./thunder.svg":"20d1","./write.svg":"d4d0"};function s(t){var e=n(t);return a(e)}function n(t){if(!a.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}s.keys=function(){return Object.keys(i)},s.resolve=n,t.exports=s,s.id="97ee"},"9b6e":function(t,e,a){"use strict";a("4f9d")},a21c:function(t,e,a){},adcd:function(t,e,a){"use strict";a("d01c")},c607:function(t,e,a){"use strict";var i=a("83ab"),s=a("fce3"),n=a("c6b6"),o=a("edd0"),r=a("69f3").get,c=RegExp.prototype,l=TypeError;i&&s&&o(c,"dotAll",{configurable:!0,get:function(){if(this!==c){if("RegExp"===n(this))return!!r(this).dotAll;throw new l("Incompatible receiver, RegExp required")}}})},cfb1:function(t,e,a){"use strict";a("e148")},d01c:function(t,e,a){},d998:function(t,e,a){"use strict";var i=a("342f");t.exports=/MSIE|Trident/.test(i)},e148:function(t,e,a){},e6a1:function(t,e,a){"use strict";a("2acb")},e7ec:function(t,e,a){"use strict";a("a21c")}}]);
//# sourceMappingURL=chunk-2cd73e53.6a218b33.js.map