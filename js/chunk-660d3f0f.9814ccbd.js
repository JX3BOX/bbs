(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-660d3f0f"],{"33a5":function(t){t.exports=JSON.parse('{"0":"æ±Ÿæ¹–","1":"å¤©ç­–","2":"ä¸‡èŠ±","3":"çº¯é˜³","4":"ä¸ƒç§€","5":"å°‘æ—","6":"è—å‰‘","7":"ä¸å¸®","8":"æ˜æ•™","9":"äº”æ¯’","10":"å”é—¨","18":"è‹äº‘","19":"é•¿æ­Œ","20":"éœ¸åˆ€","21":"è“¬è±","22":"å‡Œé›ª","23":"è¡å¤©","24":"è¯å®—"}')},4208:function(t,e,n){!function(e,n){t.exports=n()}(0,(function(){"use strict";return function(t,e,n){t=t||{};var i=e.prototype,a={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function o(t,e,n,a){return i.fromToBase(t,e,n,a)}n.en.relativeTime=a,i.fromToBase=function(e,i,o,s,r){for(var c,l,u,d=o.$locale().relativeTime||a,h=t.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],f=h.length,p=0;p<f;p+=1){var m=h[p];m.d&&(c=s?n(e).diff(o,m.d,!0):o.diff(e,m.d,!0));var v=(t.rounding||Math.round)(Math.abs(c));if(u=c>0,v<=m.r||!m.r){v<=1&&p>0&&(m=h[p-1]);var k=d[m.l];r&&(v=r(""+v)),l="string"==typeof k?k.replace("%d",v):k(v,i,m.l,u);break}}if(i)return l;var _=u?d.future:d.past;return"function"==typeof _?_(l):_.replace("%s",l)},i.to=function(t,e){return o(t,e,this,!0)},i.from=function(t,e){return o(t,e,this)};var s=function(t){return t.$u?n.utc():n()};i.toNow=function(t){return this.to(s(this),t)},i.fromNow=function(t){return this.from(s(this),t)}}}))},"466d":function(t,e,n){"use strict";var i=n("c65b"),a=n("d784"),o=n("825a"),s=n("50c4"),r=n("577e"),c=n("1d80"),l=n("dc4a"),u=n("8aa5"),d=n("14c3");a("match",(function(t,e,n){return[function(e){var n=c(this),a=void 0==e?void 0:l(e,t);return a?i(a,e,n):new RegExp(e)[t](r(n))},function(t){var i=o(this),a=r(t),c=n(e,i,a);if(c.done)return c.value;if(!i.global)return d(i,a);var l=i.unicode;i.lastIndex=0;var h,f=[],p=0;while(null!==(h=d(i,a))){var m=r(h[0]);f[p]=m,""===m&&(i.lastIndex=u(a,s(i.lastIndex),l)),p++}return 0===p?null:f}]}))},"498a":function(t,e,n){"use strict";var i=n("23e7"),a=n("58a8").trim,o=n("c8d2");i({target:"String",proto:!0,forced:o("trim")},{trim:function(){return a(this)}})},"5ca7":function(t,e,n){},6398:function(t,e,n){},"976f":function(t,e,n){"use strict";n("5ca7")},a15b:function(t,e,n){"use strict";var i=n("23e7"),a=n("e330"),o=n("44ad"),s=n("fc6a"),r=n("a640"),c=a([].join),l=o!=Object,u=r("join",",");i({target:"Array",proto:!0,forced:l||!u},{join:function(t){return c(s(this),void 0===t?",":t)}})},a27f:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("41cb");function a(t){return Object(i["c"])().get("/api/summary/batch",{params:t})}},a471:function(t,e,n){!function(e,i){t.exports=i(n("5a0c"))}(0,(function(t){"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=e(t),i={name:"zh-cn",weekdays:"æ˜ŸæœŸæ—¥_æ˜ŸæœŸä¸€_æ˜ŸæœŸäºŒ_æ˜ŸæœŸä¸‰_æ˜ŸæœŸå››_æ˜ŸæœŸäº”_æ˜ŸæœŸå…­".split("_"),weekdaysShort:"å‘¨æ—¥_å‘¨ä¸€_å‘¨äºŒ_å‘¨ä¸‰_å‘¨å››_å‘¨äº”_å‘¨å…­".split("_"),weekdaysMin:"æ—¥_ä¸€_äºŒ_ä¸‰_å››_äº”_å…­".split("_"),months:"ä¸€æœˆ_äºŒæœˆ_ä¸‰æœˆ_å››æœˆ_äº”æœˆ_å…­æœˆ_ä¸ƒæœˆ_å…«æœˆ_ä¹æœˆ_åæœˆ_åä¸€æœˆ_åäºŒæœˆ".split("_"),monthsShort:"1æœˆ_2æœˆ_3æœˆ_4æœˆ_5æœˆ_6æœˆ_7æœˆ_8æœˆ_9æœˆ_10æœˆ_11æœˆ_12æœˆ".split("_"),ordinal:function(t,e){return"W"===e?t+"å‘¨":t+"æ—¥"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYå¹´MæœˆDæ—¥",LLL:"YYYYå¹´MæœˆDæ—¥Ahç‚¹mmåˆ†",LLLL:"YYYYå¹´MæœˆDæ—¥ddddAhç‚¹mmåˆ†",l:"YYYY/M/D",ll:"YYYYå¹´MæœˆDæ—¥",lll:"YYYYå¹´MæœˆDæ—¥ HH:mm",llll:"YYYYå¹´MæœˆDæ—¥dddd HH:mm"},relativeTime:{future:"%så†…",past:"%så‰",s:"å‡ ç§’",m:"1 åˆ†é’Ÿ",mm:"%d åˆ†é’Ÿ",h:"1 å°æ—¶",hh:"%d å°æ—¶",d:"1 å¤©",dd:"%d å¤©",M:"1 ä¸ªæœˆ",MM:"%d ä¸ªæœˆ",y:"1 å¹´",yy:"%d å¹´"},meridiem:function(t,e){var n=100*t+e;return n<600?"å‡Œæ™¨":n<900?"æ—©ä¸Š":n<1100?"ä¸Šåˆ":n<1300?"ä¸­åˆ":n<1800?"ä¸‹åˆ":"æ™šä¸Š"}};return n.default.locale(i,null,!0),i}))},c8a91:function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return r})),n.d(e,"f",(function(){return c})),n.d(e,"e",(function(){return u})),n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return o})),n.d(e,"g",(function(){return l}));var i=n("41cb");function a(){return Object(i["c"])({mute:!0}).get("/api/joke/recommended")}function o(t){return Object(i["c"])().post("/api/joke/share",t)}var s=function(t){return Object(i["a"])().get("/api/cms/post/jokes",{params:t})};function r(t){return Object(i["a"])().get("/api/cms/post/joke/".concat(t))}var c=function(t){return Object(i["a"])().put("/api/cms/post/joke/".concat(t,"/star"))};function l(t){return Object(i["a"])().put("/api/cms/post/joke/".concat(t,"/unstar"))}var u=function(t){return Object(i["a"])().delete("/api/cms/post/joke/".concat(t))}},c8d2:function(t,e,n){var i=n("5e77").PROPER,a=n("d039"),o=n("5899"),s="â€‹Â…á ";t.exports=function(t){return a((function(){return!!o[t]()||s[t]()!==s||i&&o[t].name!==t}))}},ecfb:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"v-joke"},[t.id?n("div",{staticClass:"m-joke-single-container"},[n("div",{staticClass:"m-joke-goback"},[n("el-button",{staticClass:"u-back",attrs:{size:"mini",icon:"el-icon-arrow-left"},on:{click:t.goBack}},[t._v("è¿”å›åˆ—è¡¨")]),t._m(0)],1),n("el-row",{staticClass:"m-joke-list",attrs:{gutter:20}},[n("el-col",{attrs:{span:24}},[n("div",{staticClass:"m-joke-item"},[n("joke-item",{attrs:{joke:t.joke,mode:"single"}})],1)])],1),n("Thx",{staticClass:"m-thx",attrs:{postId:t.id,postType:"joke",postTitle:t.title,userId:t.user_id,adminBoxcoinEnable:!1,userBoxcoinEnable:!0}}),n("div",{staticClass:"m-single-comment"},[n("el-divider",{attrs:{"content-position":"left"}},[t._v("è¯„è®º")]),n("Comment",{attrs:{id:t.id,category:"joke"}})],1)],1):n("div",{staticClass:"m-joke-list-container"},[n("div",{staticClass:"m-archive-search m-joke-search",attrs:{slot:"search-before"},slot:"search-before"},[n("a",{staticClass:"u-publish el-button el-button--primary",attrs:{href:t.publish_link}},[t._v("+ å‘å¸ƒä½œå“")]),n("el-input",{attrs:{placeholder:"è¯·è¾“å…¥æœç´¢å†…å®¹"},model:{value:t.search,callback:function(e){t.search="string"===typeof e?e.trim():e},expression:"search"}},[n("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v("å…³é”®è¯")]),n("el-switch",{attrs:{slot:"append","inactive-value":0,"active-value":1,"inactive-text":"åªçœ‹ç²¾é€‰"},slot:"append",model:{value:t.star,callback:function(e){t.star=e},expression:"star"}})],1)],1),n("div",{staticClass:"m-joke-types"},[n("el-tabs",{model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[n("el-tab-pane",{attrs:{name:"all",label:"å…¨éƒ¨"}},[n("span",{attrs:{slot:"label"},slot:"label"},[n("i",{staticClass:"u-icon el-icon-menu",staticStyle:{"vertical-align":"0"}}),t._v("å…¨éƒ¨ ")])]),t._l(t.schoolmap,(function(e,i){return n("el-tab-pane",{key:i,attrs:{name:i}},[n("div",{staticStyle:{"min-width":"57px"},attrs:{slot:"label"},slot:"label"},[n("img",{staticClass:"u-icon",attrs:{src:t._f("showSchoolIcon")(i),alt:e}}),t._v(" "+t._s(e)+" ")])])}))],2)],1),n("joke-post",{attrs:{type:t.type}}),t.jokes&&t.jokes.length?n("el-row",{staticClass:"m-joke-list",attrs:{gutter:20}},t._l(t.jokes,(function(e){return n("el-col",{key:e.id,attrs:{span:24}},[n("div",{staticClass:"m-joke-item"},[n("joke-item",{attrs:{joke:e},on:{update:t.handleJokeUpdate}})],1)])})),1):n("el-alert",{attrs:{title:"æ²¡æœ‰æ‰¾åˆ°ç›¸å…³æ¡ç›®",type:"info","show-icon":""}}),n("el-pagination",{staticClass:"m-joke-pagination",attrs:{background:"","page-size":t.per,"hide-on-single-page":!0,"current-page":t.page,layout:"total, prev, pager, next, jumper",total:t.total},on:{"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e},"current-change":t.skipTop}})],1)])},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{staticClass:"u-doc",attrs:{href:"/tool/23239",target:"_blank"}},[n("i",{staticClass:"el-icon-info"}),t._v("æ¸¸æˆå†…è·å–æˆ–å‘å¸ƒéªšè¯ ")])}],o=(n("ac1f"),n("841c"),n("b64b"),n("4e82"),n("d3b7"),n("159b"),n("d81d"),n("a15b"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"m-joke-item"},[n("div",{staticClass:"u-content",class:"single"===t.mode?"on":"",on:{click:t.handleContent}},[t.joke.star?n("i",{staticClass:"u-star",class:t.joke.star?"on":"",attrs:{title:"ç²¾é€‰"}},[t._v("â˜…")]):t._e(),n("span",{staticClass:"u-sentence",domProps:{innerHTML:t._s(t.parse(t.joke.content))}})]),n("div",{staticClass:"u-misc"},[n("div",{staticClass:"u-op"},[n("span",{staticClass:"u-user"},[n("img",{attrs:{width:"24",height:"24",src:t._f("showAvatar")(t.user_avatar)}}),t.joke.user_id?n("a",{attrs:{href:t._f("authorLink")(t.joke.user_id),target:"_blank"}},[t._v(t._s(t.user_name))]):n("span",[t._v(t._s(t.joke.author||"åŒ¿å"))])]),n("el-link",{staticClass:"u-copy",attrs:{type:"primary",disabled:t.disabled},on:{click:function(e){return t.handleCopy(t.joke.content)}}},[n("i",{staticClass:"el-icon-document-copy"}),t._v(" å¤åˆ¶ ")]),"single"===t.mode&&(t.isAuthor||t.isEditor)?n("a",{staticClass:"u-edit el-link el-link--primary is-underline",attrs:{href:t.editLink("joke",t.joke.id),target:"_blank"}},[n("i",{staticClass:"el-icon-edit-outline"}),t._v(" ç¼–è¾‘ ")]):t._e(),t.isListPage?n("a",{staticClass:"u-like",class:{on:t.isLike},attrs:{title:"èµ"},on:{click:t.addLike}},[n("i",{staticClass:"like-icon"},[t._v(t._s(t.isLike?"â™¥":"â™¡"))]),t._v("Like "),t.count?n("span",{staticClass:"like-count"},[t._v(t._s(t.count))]):t._e()]):t._e(),t.isEditor?[n("span",{staticClass:"u-op-star el-link el-link--primary is-underline",on:{click:t.handleStar}},[n("i",{class:t.isStar?"el-icon-star-off":"el-icon-star-on"}),t._v(" "+t._s(t.isStar?"å–æ¶ˆç²¾é€‰":"è®¾ä¸ºç²¾é€‰")+" ")]),n("span",{staticClass:"u-delete el-link el-link--primary is-underline",on:{click:t.handleDelete}},[n("i",{staticClass:"el-icon-delete"}),t._v(" åˆ é™¤ ")])]:t._e()],2),n("div",{staticClass:"u-other"},[n("span",{staticClass:"u-date"},[n("i",{staticClass:"el-icon-date"}),t._v("Â  "),n("time",[t._v(t._s(t._f("dateFormat")(t.joke.created_at)))])])])])])}),s=[],r=n("506c"),c=n("fb92"),l=n("85e4"),u=n("c8a91"),d=n("c9d2"),h=n("9616"),f={name:"joke_item",props:["joke","mode"],data:function(){return{disabled:!1,isStar:this.joke.star,count:0,isLike:!1}},filters:{dateFormat:function(t){return Object(c["a"])(new Date(t))},showAvatar:function(t){return Object(l["showAvatar"])(t)},authorLink:l["authorLink"]},computed:{isListPage:function(){return"single"!==this.mode},isEditor:function(){return d["a"].isEditor()},user_avatar:function(){var t,e;return null===(t=this.joke)||void 0===t||null===(e=t.user_info)||void 0===e?void 0:e.user_avatar},user_name:function(){var t,e;return null===(t=this.joke)||void 0===t||null===(e=t.user_info)||void 0===e?void 0:e.display_name},isAuthor:function(){var t=d["a"].getInfo();return t.uid===this.joke.user_id}},watch:{joke:{handler:function(t){this.count=t.count},deep:!0,immediate:!0}},methods:{parse:function(t){var e=new r["a"](t);return e.code},handleCopy:function(t){var e=this;this.disabled=!0,navigator.clipboard.writeText(t).then((function(){e.copyLabel="å·²å¤åˆ¶",setTimeout((function(){e.copyLabel="å¤åˆ¶",e.disabled=!1}),3e3)}))},editLink:l["editLink"],addLike:function(){if(!this.isLike){var t;if(this.count++,!this.isLike)Object(h["b"])("joke",null===(t=this.joke)||void 0===t?void 0:t.id,"likes");this.isLike=!0}},handleStar:function(){var t=this;this.isStar?this.unStar():Object(u["f"])(this.joke.id).then((function(){t.$notify({title:"æˆåŠŸ",message:"åŠ ç²¾æˆåŠŸ",type:"success"}),t.isStar=!0,t.joke.star=!0,t.$forceUpdate()}))},unStar:function(){var t=this;Object(u["g"])(this.joke.id).then((function(){t.$notify({title:"æˆåŠŸ",message:"å–æ¶ˆåŠ ç²¾æˆåŠŸ",type:"success"}),t.isStar=!1,t.joke.star=!1,t.$forceUpdate()}))},handleDelete:function(){var t=this;this.$confirm("æ­¤æ“ä½œå°†ä¼šåˆ é™¤è¯¥è¡¨æƒ…ï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ","æç¤º",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then((function(){Object(u["e"])(t.joke.id).then((function(){t.$notify({title:"æˆåŠŸ",message:"åˆ é™¤æˆåŠŸ",type:"success"}),"single"===t.mode?t.$router.go(-1):t.$emit("update")}))}))},handleContent:function(){this.$router.push("/joke/".concat(this.joke.id))}}},p=f,m=n("2877"),v=Object(m["a"])(p,o,s,!1,null,null,null),k=v.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"m-joke-publish"},[n("el-input",{attrs:{type:"textarea",rows:4,placeholder:"å¿«é€Ÿå‘å¸ƒä¸€æ¡éªšè¯",id:"textarea",maxlength:128,minlength:1,"show-word-limit":""},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),n("div",{staticClass:"u-actions"},[n("div",[n("joke-emotion",{on:{emotion:t.insertVariable}}),n("el-select",{staticClass:"u-type",attrs:{size:"small",placeholder:"è¯·é€‰æ‹©é—¨æ´¾"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},t._l(t.schoolmap,(function(e,i){return n("el-option",{key:i,attrs:{value:i,label:e}},[n("div",{staticStyle:{display:"flex","align-items":"center"}},[n("img",{staticClass:"u-icon",staticStyle:{"margin-right":"20px"},attrs:{width:"24",height:"24",src:t._f("showSchoolIcon")(i),alt:e}}),t._v(" "+t._s(e)+" ")])])})),1)],1),n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-position"},on:{click:t.publish}},[t._v("æäº¤")])],1)],1)},g=[],j=n("c7eb"),b=n("1da1"),y=(n("498a"),n("466d"),n("4de4"),n("caad"),n("2532"),n("5319"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-popover",{attrs:{"popper-class":"m-joke-popover",placement:"top",width:"500",offset:-200},model:{value:t.showPop,callback:function(e){t.showPop=e},expression:"showPop"}},[n("Emotion",{staticClass:"m-publish-joke-emotion",on:{selected:t.handleEmotionSelect}}),n("span",{staticClass:"m-publish-joke-button",staticStyle:{cursor:"pointer"},attrs:{slot:"reference",title:"é€‰æ‹©è¡¨æƒ…"},slot:"reference"},[t._v("ğŸ˜€æ’å…¥è¡¨æƒ…")])],1)}),C=[],w=n("c840"),x={name:"joke_post",components:{Emotion:w["a"]},data:function(){return{showPop:!1}},methods:{handleEmotionSelect:function(t){this.$emit("emotion",t),this.showPop=!1}}},L=x,S=(n("ff94"),Object(m["a"])(L,y,C,!1,null,null,null)),Y=S.exports,O=n("0608"),E=n("33a5"),$=n("65c2"),M={components:{"joke-emotion":Y},data:function(){return{content:"",type:"0",schoolmap:E,processing:!1}},computed:{isLogin:function(){return d["a"].isLogin()}},methods:{insertVariable:function(t){var e=this;return Object(b["a"])(Object(j["a"])().mark((function n(){var i,a,o;return Object(j["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=document.querySelector("#textarea"),!i.selectionStart&&0!==i.selectionStart){n.next=11;break}return a=i.selectionStart,o=i.selectionEnd,e.content=i.value.substring(0,a)+t+i.value.substring(o,i.value.length),n.next=7,e.$nextTick();case 7:i.focus(),i.setSelectionRange(o+t.length,o+t.length),n.next=12;break;case 11:e.content=t;case 12:case"end":return n.stop()}}),n)})))()},publish:function(){var t=this;if(this.isLogin){if(!this.check())return;this.processing=!0,Object(u["d"])({type:"all"===this.type?"0":this.type,content:this.content}).then((function(e){var n;null===e||void 0===e||null===(n=e.data)||void 0===n||n.data;t.$message({message:"å‘å¸ƒæˆåŠŸ,è¯·ç­‰å¾…å®¡æ ¸",type:"success"}),t.content=""})).finally((function(){t.processing=!1}))}else d["a"].toLogin()},check:function(){var t,e=Object.keys(O),n=this.content.trim(),i=/(#[\u4e00-\u9fa5]{1})/g,a=/(#[\u4e00-\u9fa5]{2})/g,o=/(#[\u4e00-\u9fa5]{3})/g;if(!n.length)return this.$notify({title:"é”™è¯¯",message:"å†…å®¹ä¸èƒ½ä¸ºç©º",type:"error"}),!1;var s=n.match(i)?n.match(i).filter((function(t){return e.includes(t)})):[];s.forEach((function(t){return n.replace(t,"")}));var r=n.match(a)?n.match(a).filter((function(t){return e.includes(t)})):[];r.forEach((function(t){return n.replace(t,"")}));var c=n.match(o)?n.match(o).filter((function(t){return e.includes(t)})):[];c.forEach((function(t){return n.replace(t,"")}));var l=s.length+r.length+c.length;if(this.contentLength=l,l>10)return this.$notify({title:"é”™è¯¯",message:"è¡¨æƒ…ä¸ªæ•°ä¸èƒ½è¶…è¿‡10ä¸ª",type:"error"}),!1;var u=(null===(t=n.match(/[^\x00-\xff]/g))||void 0===t?void 0:t.length)||0;return!(2*u+(n.length-u)>128)||(this.$notify({title:"é”™è¯¯",message:"å†…å®¹é•¿åº¦ä¸èƒ½è¶…è¿‡128ä¸ªå­—ç¬¦",type:"error"}),!1)}},filters:{showSchoolIcon:function(t){return $["__imgPath"]+"image/school/"+t+".png"}}},T=M,D=Object(m["a"])(T,_,g,!1,null,null,null),P=D.exports,I=n("23d8"),H=n("a27f"),A={name:"Joke",components:{"joke-item":k,Comment:I["a"],"joke-post":P},data:function(){return{loading:!1,schoolmap:E,sortedEmotions:[],type:"all",star:0,search:"",per:10,page:1,total:0,jokes:[],joke:""}},computed:{publish_link:function(){return Object(l["publishLink"])("joke")},id:function(){return this.$route.params.id},params:function(){return{per:~~this.per,page:~~this.page,type:"all"==this.type?"":this.type,search:this.search,star:this.star?1:""}},keys:function(){return[this.id,this.search,this.type,this.star,this.page,this.per]},reset_keys:function(){return[this.search,this.type,this.star]},user_id:function(){var t;return(null===(t=this.joke)||void 0===t?void 0:t.user_id)||0},title:function(){var t;return null===(t=this.joke)||void 0===t?void 0:t.content}},filters:{showSchoolIcon:function(t){return $["__imgPath"]+"image/school/"+t+".png"}},methods:{sortEmotion:function(){var t=this,e=Object.keys(O);e.sort((function(t,e){return t.localeCompare(e)})),e.forEach((function(e){var n={key:e,value:O[e]};t.sortedEmotions.push(n)}))},loadList:function(){var t=this;this.loading=!0,Object(u["b"])(this.params).then((function(e){var n,i,a,o;t.jokes=null===e||void 0===e||null===(n=e.data)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.list,t.total=null===e||void 0===e||null===(a=e.data)||void 0===a||null===(o=a.data)||void 0===o?void 0:o.total,t.loadLike()})).finally((function(){t.loading=!1}))},loadSingle:function(){var t=this;this.loading=!0,Object(u["a"])(this.id).then((function(e){var n;t.joke=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.data})).finally((function(){t.loading=!1}))},handleJokeUpdate:function(){this.loadList()},init:function(){this.id?this.loadSingle():this.loadList()},goBack:function(){this.$router.push("/joke")},skipTop:function(){window.scrollTo(0,0)},loadLike:function(){var t=this;if(this.jokes&&this.jokes.length){var e=this.jokes.map((function(t){return"joke-"+t.id}));e=e.join(",");var n={post_type:"joke",post_action:"likes",id:e};Object(H["a"])(n).then((function(e){var n=e.data.data;Object.keys(n).length&&t.jokes.forEach((function(e){var i;t.$set(e,"count",null===n||void 0===n||null===(i=n["joke-"+e.id])||void 0===i?void 0:i.likes)}))}))}}},watch:{keys:{deep:!0,handler:function(){this.init()},immediate:!0},reset_keys:{deep:!0,handler:function(){this.page=1}},search:function(){this.type="all"},jokes:{deep:!0,handler:function(){}}},created:function(){this.sortEmotion()}},B=A,z=(n("976f"),Object(m["a"])(B,i,a,!1,null,null,null));e["default"]=z.exports},fb92:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return s}));n("99af");var i=n("5a0c"),a=n.n(i),o=n("4208");function s(t){return a()().from(a()(t))}function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=t.getFullYear(),a=t.getMonth()+1,o=t.getDate(),s=n?"".concat(i).concat(e).concat(c(a)).concat(e).concat(c(o)):"".concat(i).concat(e).concat(a).concat(e).concat(o);return s}function c(t){return t<10?"0"+t:t}n("a471"),a.a.locale("zh-cn"),a.a.extend(o)},ff94:function(t,e,n){"use strict";n("6398")}}]);
//# sourceMappingURL=chunk-660d3f0f.9814ccbd.js.map